(self.webpackChunk_idg_project_name=self.webpackChunk_idg_project_name||[]).push([[343],{21924:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(40210),callBind=__webpack_require__(55559),$indexOf=callBind(GetIntrinsic("String.prototype.indexOf"));module.exports=function callBoundIntrinsic(name,allowMissing){var intrinsic=GetIntrinsic(name,!!allowMissing);return"function"==typeof intrinsic&&$indexOf(name,".prototype.")>-1?callBind(intrinsic):intrinsic}},55559:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var bind=__webpack_require__(58612),GetIntrinsic=__webpack_require__(40210),$apply=GetIntrinsic("%Function.prototype.apply%"),$call=GetIntrinsic("%Function.prototype.call%"),$reflectApply=GetIntrinsic("%Reflect.apply%",!0)||bind.call($call,$apply),$gOPD=GetIntrinsic("%Object.getOwnPropertyDescriptor%",!0),$defineProperty=GetIntrinsic("%Object.defineProperty%",!0),$max=GetIntrinsic("%Math.max%");if($defineProperty)try{$defineProperty({},"a",{value:1})}catch(e){$defineProperty=null}module.exports=function callBind(originalFunction){var func=$reflectApply(bind,$call,arguments);if($gOPD&&$defineProperty){var desc=$gOPD(func,"length");desc.configurable&&$defineProperty(func,"length",{value:1+$max(0,originalFunction.length-(arguments.length-1))})}return func};var applyBind=function applyBind(){return $reflectApply(bind,$apply,arguments)};$defineProperty?$defineProperty(module.exports,"apply",{value:applyBind}):module.exports.apply=applyBind},17648:function(module){"use strict";var ERROR_MESSAGE="Function.prototype.bind called on incompatible ",slice=Array.prototype.slice,toStr=Object.prototype.toString;module.exports=function bind(that){var target=this;if("function"!=typeof target||"[object Function]"!==toStr.call(target))throw new TypeError(ERROR_MESSAGE+target);for(var bound,args=slice.call(arguments,1),binder=function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)));return Object(result)===result?result:this}return target.apply(that,args.concat(slice.call(arguments)))},boundLength=Math.max(0,target.length-args.length),boundArgs=[],i=0;i<boundLength;i++)boundArgs.push("$"+i);if(bound=Function("binder","return function ("+boundArgs.join(",")+"){ return binder.apply(this,arguments); }")(binder),target.prototype){var Empty=function Empty(){};Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null}return bound}},58612:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var implementation=__webpack_require__(17648);module.exports=Function.prototype.bind||implementation},40210:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var $SyntaxError=SyntaxError,$Function=Function,$TypeError=TypeError,getEvalledConstructor=function(expressionSyntax){try{return $Function('"use strict"; return ('+expressionSyntax+").constructor;")()}catch(e){}},$gOPD=Object.getOwnPropertyDescriptor;if($gOPD)try{$gOPD({},"")}catch(e){$gOPD=null}var throwTypeError=function(){throw new $TypeError},ThrowTypeError=$gOPD?function(){try{return throwTypeError}catch(calleeThrows){try{return $gOPD(arguments,"callee").get}catch(gOPDthrows){return throwTypeError}}}():throwTypeError,hasSymbols=__webpack_require__(83085)(),getProto=Object.getPrototypeOf||function(x){return x.__proto__},needsEval={},TypedArray="undefined"==typeof Uint8Array?undefined:getProto(Uint8Array),INTRINSICS={"%AggregateError%":"undefined"==typeof AggregateError?undefined:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?undefined:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols?getProto([][Symbol.iterator]()):undefined,"%AsyncFromSyncIteratorPrototype%":undefined,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":"undefined"==typeof Atomics?undefined:Atomics,"%BigInt%":"undefined"==typeof BigInt?undefined:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?undefined:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?undefined:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?undefined:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?undefined:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":"undefined"==typeof Int8Array?undefined:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?undefined:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?undefined:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols?getProto(getProto([][Symbol.iterator]())):undefined,"%JSON%":"object"==typeof JSON?JSON:undefined,"%Map%":"undefined"==typeof Map?undefined:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&hasSymbols?getProto((new Map)[Symbol.iterator]()):undefined,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?undefined:Promise,"%Proxy%":"undefined"==typeof Proxy?undefined:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?undefined:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?undefined:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&hasSymbols?getProto((new Set)[Symbol.iterator]()):undefined,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?undefined:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols?getProto(""[Symbol.iterator]()):undefined,"%Symbol%":hasSymbols?Symbol:undefined,"%SyntaxError%":$SyntaxError,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError,"%Uint8Array%":"undefined"==typeof Uint8Array?undefined:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?undefined:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?undefined:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?undefined:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?undefined:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?undefined:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?undefined:WeakSet},doEval=function doEval(name){var value;if("%AsyncFunction%"===name)value=getEvalledConstructor("async function () {}");else if("%GeneratorFunction%"===name)value=getEvalledConstructor("function* () {}");else if("%AsyncGeneratorFunction%"===name)value=getEvalledConstructor("async function* () {}");else if("%AsyncGenerator%"===name){var fn=doEval("%AsyncGeneratorFunction%");fn&&(value=fn.prototype)}else if("%AsyncIteratorPrototype%"===name){var gen=doEval("%AsyncGenerator%");gen&&(value=getProto(gen.prototype))}return INTRINSICS[name]=value,value},LEGACY_ALIASES={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind=__webpack_require__(58612),hasOwn=__webpack_require__(17642),$concat=bind.call(Function.call,Array.prototype.concat),$spliceApply=bind.call(Function.apply,Array.prototype.splice),$replace=bind.call(Function.call,String.prototype.replace),$strSlice=bind.call(Function.call,String.prototype.slice),$exec=bind.call(Function.call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function stringToPath(string){var first=$strSlice(string,0,1),last=$strSlice(string,-1);if("%"===first&&"%"!==last)throw new $SyntaxError("invalid intrinsic syntax, expected closing `%`");if("%"===last&&"%"!==first)throw new $SyntaxError("invalid intrinsic syntax, expected opening `%`");var result=[];return $replace(string,rePropName,(function(match,number,quote,subString){result[result.length]=quote?$replace(subString,reEscapeChar,"$1"):number||match})),result},getBaseIntrinsic=function getBaseIntrinsic(name,allowMissing){var alias,intrinsicName=name;if(hasOwn(LEGACY_ALIASES,intrinsicName)&&(intrinsicName="%"+(alias=LEGACY_ALIASES[intrinsicName])[0]+"%"),hasOwn(INTRINSICS,intrinsicName)){var value=INTRINSICS[intrinsicName];if(value===needsEval&&(value=doEval(intrinsicName)),void 0===value&&!allowMissing)throw new $TypeError("intrinsic "+name+" exists, but is not available. Please file an issue!");return{alias:alias,name:intrinsicName,value:value}}throw new $SyntaxError("intrinsic "+name+" does not exist!")};module.exports=function GetIntrinsic(name,allowMissing){if("string"!=typeof name||0===name.length)throw new $TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof allowMissing)throw new $TypeError('"allowMissing" argument must be a boolean');if(null===$exec(/^%?[^%]*%?$/,name))throw new $SyntaxError("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var parts=stringToPath(name),intrinsicBaseName=parts.length>0?parts[0]:"",intrinsic=getBaseIntrinsic("%"+intrinsicBaseName+"%",allowMissing),intrinsicRealName=intrinsic.name,value=intrinsic.value,skipFurtherCaching=!1,alias=intrinsic.alias;alias&&(intrinsicBaseName=alias[0],$spliceApply(parts,$concat([0,1],alias)));for(var i=1,isOwn=!0;i<parts.length;i+=1){var part=parts[i],first=$strSlice(part,0,1),last=$strSlice(part,-1);if(('"'===first||"'"===first||"`"===first||'"'===last||"'"===last||"`"===last)&&first!==last)throw new $SyntaxError("property names with quotes must have matching quotes");if("constructor"!==part&&isOwn||(skipFurtherCaching=!0),hasOwn(INTRINSICS,intrinsicRealName="%"+(intrinsicBaseName+="."+part)+"%"))value=INTRINSICS[intrinsicRealName];else if(null!=value){if(!(part in value)){if(!allowMissing)throw new $TypeError("base intrinsic for "+name+" exists, but the property is not available.");return}if($gOPD&&i+1>=parts.length){var desc=$gOPD(value,part);value=(isOwn=!!desc)&&"get"in desc&&!("originalValue"in desc.get)?desc.get:value[part]}else isOwn=hasOwn(value,part),value=value[part];isOwn&&!skipFurtherCaching&&(INTRINSICS[intrinsicRealName]=value)}}return value}},83085:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var origSymbol="undefined"!=typeof Symbol&&Symbol,hasSymbolSham=__webpack_require__(24429);module.exports=function hasNativeSymbols(){return"function"==typeof origSymbol&&("function"==typeof Symbol&&("symbol"==typeof origSymbol("foo")&&("symbol"==typeof Symbol("bar")&&hasSymbolSham())))}},24429:function(module){"use strict";module.exports=function hasSymbols(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var obj={},sym=Symbol("test"),symObj=Object(sym);if("string"==typeof sym)return!1;if("[object Symbol]"!==Object.prototype.toString.call(sym))return!1;if("[object Symbol]"!==Object.prototype.toString.call(symObj))return!1;for(sym in obj[sym]=42,obj)return!1;if("function"==typeof Object.keys&&0!==Object.keys(obj).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(obj).length)return!1;var syms=Object.getOwnPropertySymbols(obj);if(1!==syms.length||syms[0]!==sym)return!1;if(!Object.prototype.propertyIsEnumerable.call(obj,sym))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var descriptor=Object.getOwnPropertyDescriptor(obj,sym);if(42!==descriptor.value||!0!==descriptor.enumerable)return!1}return!0}},17642:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var bind=__webpack_require__(58612);module.exports=bind.call(Function.call,Object.prototype.hasOwnProperty)},70631:function(module,__unused_webpack_exports,__webpack_require__){var hasMap="function"==typeof Map&&Map.prototype,mapSizeDescriptor=Object.getOwnPropertyDescriptor&&hasMap?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mapSize=hasMap&&mapSizeDescriptor&&"function"==typeof mapSizeDescriptor.get?mapSizeDescriptor.get:null,mapForEach=hasMap&&Map.prototype.forEach,hasSet="function"==typeof Set&&Set.prototype,setSizeDescriptor=Object.getOwnPropertyDescriptor&&hasSet?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,setSize=hasSet&&setSizeDescriptor&&"function"==typeof setSizeDescriptor.get?setSizeDescriptor.get:null,setForEach=hasSet&&Set.prototype.forEach,weakMapHas="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,weakSetHas="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,weakRefDeref="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,booleanValueOf=Boolean.prototype.valueOf,objectToString=Object.prototype.toString,functionToString=Function.prototype.toString,$match=String.prototype.match,$slice=String.prototype.slice,$replace=String.prototype.replace,$toUpperCase=String.prototype.toUpperCase,$toLowerCase=String.prototype.toLowerCase,$test=RegExp.prototype.test,$concat=Array.prototype.concat,$join=Array.prototype.join,$arrSlice=Array.prototype.slice,$floor=Math.floor,bigIntValueOf="function"==typeof BigInt?BigInt.prototype.valueOf:null,gOPS=Object.getOwnPropertySymbols,symToString="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,hasShammedSymbols="function"==typeof Symbol&&"object"==typeof Symbol.iterator,toStringTag="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===hasShammedSymbols||"symbol")?Symbol.toStringTag:null,isEnumerable=Object.prototype.propertyIsEnumerable,gPO=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(O){return O.__proto__}:null);function addNumericSeparator(num,str){if(num===1/0||num===-1/0||num!=num||num&&num>-1e3&&num<1e3||$test.call(/e/,str))return str;var sepRegex=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof num){var int=num<0?-$floor(-num):$floor(num);if(int!==num){var intStr=String(int),dec=$slice.call(str,intStr.length+1);return $replace.call(intStr,sepRegex,"$&_")+"."+$replace.call($replace.call(dec,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $replace.call(str,sepRegex,"$&_")}var utilInspect=__webpack_require__(24654),inspectCustom=utilInspect.custom,inspectSymbol=isSymbol(inspectCustom)?inspectCustom:null;function wrapQuotes(s,defaultStyle,opts){var quoteChar="double"===(opts.quoteStyle||defaultStyle)?'"':"'";return quoteChar+s+quoteChar}function quote(s){return $replace.call(String(s),/"/g,"&quot;")}function isArray(obj){return!("[object Array]"!==toStr(obj)||toStringTag&&"object"==typeof obj&&toStringTag in obj)}function isRegExp(obj){return!("[object RegExp]"!==toStr(obj)||toStringTag&&"object"==typeof obj&&toStringTag in obj)}function isSymbol(obj){if(hasShammedSymbols)return obj&&"object"==typeof obj&&obj instanceof Symbol;if("symbol"==typeof obj)return!0;if(!obj||"object"!=typeof obj||!symToString)return!1;try{return symToString.call(obj),!0}catch(e){}return!1}module.exports=function inspect_(obj,options,depth,seen){var opts=options||{};if(has(opts,"quoteStyle")&&"single"!==opts.quoteStyle&&"double"!==opts.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(has(opts,"maxStringLength")&&("number"==typeof opts.maxStringLength?opts.maxStringLength<0&&opts.maxStringLength!==1/0:null!==opts.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var customInspect=!has(opts,"customInspect")||opts.customInspect;if("boolean"!=typeof customInspect&&"symbol"!==customInspect)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(has(opts,"indent")&&null!==opts.indent&&"\t"!==opts.indent&&!(parseInt(opts.indent,10)===opts.indent&&opts.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(has(opts,"numericSeparator")&&"boolean"!=typeof opts.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var numericSeparator=opts.numericSeparator;if(void 0===obj)return"undefined";if(null===obj)return"null";if("boolean"==typeof obj)return obj?"true":"false";if("string"==typeof obj)return inspectString(obj,opts);if("number"==typeof obj){if(0===obj)return 1/0/obj>0?"0":"-0";var str=String(obj);return numericSeparator?addNumericSeparator(obj,str):str}if("bigint"==typeof obj){var bigIntStr=String(obj)+"n";return numericSeparator?addNumericSeparator(obj,bigIntStr):bigIntStr}var maxDepth=void 0===opts.depth?5:opts.depth;if(void 0===depth&&(depth=0),depth>=maxDepth&&maxDepth>0&&"object"==typeof obj)return isArray(obj)?"[Array]":"[Object]";var indent=function getIndent(opts,depth){var baseIndent;if("\t"===opts.indent)baseIndent="\t";else{if(!("number"==typeof opts.indent&&opts.indent>0))return null;baseIndent=$join.call(Array(opts.indent+1)," ")}return{base:baseIndent,prev:$join.call(Array(depth+1),baseIndent)}}(opts,depth);if(void 0===seen)seen=[];else if(indexOf(seen,obj)>=0)return"[Circular]";function inspect(value,from,noIndent){if(from&&(seen=$arrSlice.call(seen)).push(from),noIndent){var newOpts={depth:opts.depth};return has(opts,"quoteStyle")&&(newOpts.quoteStyle=opts.quoteStyle),inspect_(value,newOpts,depth+1,seen)}return inspect_(value,opts,depth+1,seen)}if("function"==typeof obj&&!isRegExp(obj)){var name=function nameOf(f){if(f.name)return f.name;var m=$match.call(functionToString.call(f),/^function\s*([\w$]+)/);if(m)return m[1];return null}(obj),keys=arrObjKeys(obj,inspect);return"[Function"+(name?": "+name:" (anonymous)")+"]"+(keys.length>0?" { "+$join.call(keys,", ")+" }":"")}if(isSymbol(obj)){var symString=hasShammedSymbols?$replace.call(String(obj),/^(Symbol\(.*\))_[^)]*$/,"$1"):symToString.call(obj);return"object"!=typeof obj||hasShammedSymbols?symString:markBoxed(symString)}if(function isElement(x){if(!x||"object"!=typeof x)return!1;if("undefined"!=typeof HTMLElement&&x instanceof HTMLElement)return!0;return"string"==typeof x.nodeName&&"function"==typeof x.getAttribute}(obj)){for(var s="<"+$toLowerCase.call(String(obj.nodeName)),attrs=obj.attributes||[],i=0;i<attrs.length;i++)s+=" "+attrs[i].name+"="+wrapQuotes(quote(attrs[i].value),"double",opts);return s+=">",obj.childNodes&&obj.childNodes.length&&(s+="..."),s+="</"+$toLowerCase.call(String(obj.nodeName))+">"}if(isArray(obj)){if(0===obj.length)return"[]";var xs=arrObjKeys(obj,inspect);return indent&&!function singleLineValues(xs){for(var i=0;i<xs.length;i++)if(indexOf(xs[i],"\n")>=0)return!1;return!0}(xs)?"["+indentedJoin(xs,indent)+"]":"[ "+$join.call(xs,", ")+" ]"}if(function isError(obj){return!("[object Error]"!==toStr(obj)||toStringTag&&"object"==typeof obj&&toStringTag in obj)}(obj)){var parts=arrObjKeys(obj,inspect);return"cause"in Error.prototype||!("cause"in obj)||isEnumerable.call(obj,"cause")?0===parts.length?"["+String(obj)+"]":"{ ["+String(obj)+"] "+$join.call(parts,", ")+" }":"{ ["+String(obj)+"] "+$join.call($concat.call("[cause]: "+inspect(obj.cause),parts),", ")+" }"}if("object"==typeof obj&&customInspect){if(inspectSymbol&&"function"==typeof obj[inspectSymbol]&&utilInspect)return utilInspect(obj,{depth:maxDepth-depth});if("symbol"!==customInspect&&"function"==typeof obj.inspect)return obj.inspect()}if(function isMap(x){if(!mapSize||!x||"object"!=typeof x)return!1;try{mapSize.call(x);try{setSize.call(x)}catch(s){return!0}return x instanceof Map}catch(e){}return!1}(obj)){var mapParts=[];return mapForEach.call(obj,(function(value,key){mapParts.push(inspect(key,obj,!0)+" => "+inspect(value,obj))})),collectionOf("Map",mapSize.call(obj),mapParts,indent)}if(function isSet(x){if(!setSize||!x||"object"!=typeof x)return!1;try{setSize.call(x);try{mapSize.call(x)}catch(m){return!0}return x instanceof Set}catch(e){}return!1}(obj)){var setParts=[];return setForEach.call(obj,(function(value){setParts.push(inspect(value,obj))})),collectionOf("Set",setSize.call(obj),setParts,indent)}if(function isWeakMap(x){if(!weakMapHas||!x||"object"!=typeof x)return!1;try{weakMapHas.call(x,weakMapHas);try{weakSetHas.call(x,weakSetHas)}catch(s){return!0}return x instanceof WeakMap}catch(e){}return!1}(obj))return weakCollectionOf("WeakMap");if(function isWeakSet(x){if(!weakSetHas||!x||"object"!=typeof x)return!1;try{weakSetHas.call(x,weakSetHas);try{weakMapHas.call(x,weakMapHas)}catch(s){return!0}return x instanceof WeakSet}catch(e){}return!1}(obj))return weakCollectionOf("WeakSet");if(function isWeakRef(x){if(!weakRefDeref||!x||"object"!=typeof x)return!1;try{return weakRefDeref.call(x),!0}catch(e){}return!1}(obj))return weakCollectionOf("WeakRef");if(function isNumber(obj){return!("[object Number]"!==toStr(obj)||toStringTag&&"object"==typeof obj&&toStringTag in obj)}(obj))return markBoxed(inspect(Number(obj)));if(function isBigInt(obj){if(!obj||"object"!=typeof obj||!bigIntValueOf)return!1;try{return bigIntValueOf.call(obj),!0}catch(e){}return!1}(obj))return markBoxed(inspect(bigIntValueOf.call(obj)));if(function isBoolean(obj){return!("[object Boolean]"!==toStr(obj)||toStringTag&&"object"==typeof obj&&toStringTag in obj)}(obj))return markBoxed(booleanValueOf.call(obj));if(function isString(obj){return!("[object String]"!==toStr(obj)||toStringTag&&"object"==typeof obj&&toStringTag in obj)}(obj))return markBoxed(inspect(String(obj)));if(!function isDate(obj){return!("[object Date]"!==toStr(obj)||toStringTag&&"object"==typeof obj&&toStringTag in obj)}(obj)&&!isRegExp(obj)){var ys=arrObjKeys(obj,inspect),isPlainObject=gPO?gPO(obj)===Object.prototype:obj instanceof Object||obj.constructor===Object,protoTag=obj instanceof Object?"":"null prototype",stringTag=!isPlainObject&&toStringTag&&Object(obj)===obj&&toStringTag in obj?$slice.call(toStr(obj),8,-1):protoTag?"Object":"",tag=(isPlainObject||"function"!=typeof obj.constructor?"":obj.constructor.name?obj.constructor.name+" ":"")+(stringTag||protoTag?"["+$join.call($concat.call([],stringTag||[],protoTag||[]),": ")+"] ":"");return 0===ys.length?tag+"{}":indent?tag+"{"+indentedJoin(ys,indent)+"}":tag+"{ "+$join.call(ys,", ")+" }"}return String(obj)};var hasOwn=Object.prototype.hasOwnProperty||function(key){return key in this};function has(obj,key){return hasOwn.call(obj,key)}function toStr(obj){return objectToString.call(obj)}function indexOf(xs,x){if(xs.indexOf)return xs.indexOf(x);for(var i=0,l=xs.length;i<l;i++)if(xs[i]===x)return i;return-1}function inspectString(str,opts){if(str.length>opts.maxStringLength){var remaining=str.length-opts.maxStringLength,trailer="... "+remaining+" more character"+(remaining>1?"s":"");return inspectString($slice.call(str,0,opts.maxStringLength),opts)+trailer}return wrapQuotes($replace.call($replace.call(str,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,lowbyte),"single",opts)}function lowbyte(c){var n=c.charCodeAt(0),x={8:"b",9:"t",10:"n",12:"f",13:"r"}[n];return x?"\\"+x:"\\x"+(n<16?"0":"")+$toUpperCase.call(n.toString(16))}function markBoxed(str){return"Object("+str+")"}function weakCollectionOf(type){return type+" { ? }"}function collectionOf(type,size,entries,indent){return type+" ("+size+") {"+(indent?indentedJoin(entries,indent):$join.call(entries,", "))+"}"}function indentedJoin(xs,indent){if(0===xs.length)return"";var lineJoiner="\n"+indent.prev+indent.base;return lineJoiner+$join.call(xs,","+lineJoiner)+"\n"+indent.prev}function arrObjKeys(obj,inspect){var isArr=isArray(obj),xs=[];if(isArr){xs.length=obj.length;for(var i=0;i<obj.length;i++)xs[i]=has(obj,i)?inspect(obj[i],obj):""}var symMap,syms="function"==typeof gOPS?gOPS(obj):[];if(hasShammedSymbols){symMap={};for(var k=0;k<syms.length;k++)symMap["$"+syms[k]]=syms[k]}for(var key in obj)has(obj,key)&&(isArr&&String(Number(key))===key&&key<obj.length||hasShammedSymbols&&symMap["$"+key]instanceof Symbol||($test.call(/[^\w$]/,key)?xs.push(inspect(key,obj)+": "+inspect(obj[key],obj)):xs.push(key+": "+inspect(obj[key],obj))));if("function"==typeof gOPS)for(var j=0;j<syms.length;j++)isEnumerable.call(obj,syms[j])&&xs.push("["+inspect(syms[j])+"]: "+inspect(obj[syms[j]],obj));return xs}},55798:function(module){"use strict";var replace=String.prototype.replace,percentTwenties=/%20/g,Format_RFC1738="RFC1738",Format_RFC3986="RFC3986";module.exports={default:Format_RFC3986,formatters:{RFC1738:function(value){return replace.call(value,percentTwenties,"+")},RFC3986:function(value){return String(value)}},RFC1738:Format_RFC1738,RFC3986:Format_RFC3986}},80129:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var stringify=__webpack_require__(58261),parse=__webpack_require__(55235),formats=__webpack_require__(55798);module.exports={formats:formats,parse:parse,stringify:stringify}},55235:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var utils=__webpack_require__(12769),has=Object.prototype.hasOwnProperty,isArray=Array.isArray,defaults={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:utils.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},interpretNumericEntities=function(str){return str.replace(/&#(\d+);/g,(function($0,numberStr){return String.fromCharCode(parseInt(numberStr,10))}))},parseArrayValue=function(val,options){return val&&"string"==typeof val&&options.comma&&val.indexOf(",")>-1?val.split(","):val},parseKeys=function parseQueryStringKeys(givenKey,val,options,valuesParsed){if(givenKey){var key=options.allowDots?givenKey.replace(/\.([^.[]+)/g,"[$1]"):givenKey,child=/(\[[^[\]]*])/g,segment=options.depth>0&&/(\[[^[\]]*])/.exec(key),parent=segment?key.slice(0,segment.index):key,keys=[];if(parent){if(!options.plainObjects&&has.call(Object.prototype,parent)&&!options.allowPrototypes)return;keys.push(parent)}for(var i=0;options.depth>0&&null!==(segment=child.exec(key))&&i<options.depth;){if(i+=1,!options.plainObjects&&has.call(Object.prototype,segment[1].slice(1,-1))&&!options.allowPrototypes)return;keys.push(segment[1])}return segment&&keys.push("["+key.slice(segment.index)+"]"),function(chain,val,options,valuesParsed){for(var leaf=valuesParsed?val:parseArrayValue(val,options),i=chain.length-1;i>=0;--i){var obj,root=chain[i];if("[]"===root&&options.parseArrays)obj=[].concat(leaf);else{obj=options.plainObjects?Object.create(null):{};var cleanRoot="["===root.charAt(0)&&"]"===root.charAt(root.length-1)?root.slice(1,-1):root,index=parseInt(cleanRoot,10);options.parseArrays||""!==cleanRoot?!isNaN(index)&&root!==cleanRoot&&String(index)===cleanRoot&&index>=0&&options.parseArrays&&index<=options.arrayLimit?(obj=[])[index]=leaf:"__proto__"!==cleanRoot&&(obj[cleanRoot]=leaf):obj={0:leaf}}leaf=obj}return leaf}(keys,val,options,valuesParsed)}};module.exports=function(str,opts){var options=function normalizeParseOptions(opts){if(!opts)return defaults;if(null!==opts.decoder&&void 0!==opts.decoder&&"function"!=typeof opts.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==opts.charset&&"utf-8"!==opts.charset&&"iso-8859-1"!==opts.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var charset=void 0===opts.charset?defaults.charset:opts.charset;return{allowDots:void 0===opts.allowDots?defaults.allowDots:!!opts.allowDots,allowPrototypes:"boolean"==typeof opts.allowPrototypes?opts.allowPrototypes:defaults.allowPrototypes,allowSparse:"boolean"==typeof opts.allowSparse?opts.allowSparse:defaults.allowSparse,arrayLimit:"number"==typeof opts.arrayLimit?opts.arrayLimit:defaults.arrayLimit,charset:charset,charsetSentinel:"boolean"==typeof opts.charsetSentinel?opts.charsetSentinel:defaults.charsetSentinel,comma:"boolean"==typeof opts.comma?opts.comma:defaults.comma,decoder:"function"==typeof opts.decoder?opts.decoder:defaults.decoder,delimiter:"string"==typeof opts.delimiter||utils.isRegExp(opts.delimiter)?opts.delimiter:defaults.delimiter,depth:"number"==typeof opts.depth||!1===opts.depth?+opts.depth:defaults.depth,ignoreQueryPrefix:!0===opts.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof opts.interpretNumericEntities?opts.interpretNumericEntities:defaults.interpretNumericEntities,parameterLimit:"number"==typeof opts.parameterLimit?opts.parameterLimit:defaults.parameterLimit,parseArrays:!1!==opts.parseArrays,plainObjects:"boolean"==typeof opts.plainObjects?opts.plainObjects:defaults.plainObjects,strictNullHandling:"boolean"==typeof opts.strictNullHandling?opts.strictNullHandling:defaults.strictNullHandling}}(opts);if(""===str||null==str)return options.plainObjects?Object.create(null):{};for(var tempObj="string"==typeof str?function parseQueryStringValues(str,options){var i,obj={},cleanStr=options.ignoreQueryPrefix?str.replace(/^\?/,""):str,limit=options.parameterLimit===1/0?void 0:options.parameterLimit,parts=cleanStr.split(options.delimiter,limit),skipIndex=-1,charset=options.charset;if(options.charsetSentinel)for(i=0;i<parts.length;++i)0===parts[i].indexOf("utf8=")&&("utf8=%E2%9C%93"===parts[i]?charset="utf-8":"utf8=%26%2310003%3B"===parts[i]&&(charset="iso-8859-1"),skipIndex=i,i=parts.length);for(i=0;i<parts.length;++i)if(i!==skipIndex){var key,val,part=parts[i],bracketEqualsPos=part.indexOf("]="),pos=-1===bracketEqualsPos?part.indexOf("="):bracketEqualsPos+1;-1===pos?(key=options.decoder(part,defaults.decoder,charset,"key"),val=options.strictNullHandling?null:""):(key=options.decoder(part.slice(0,pos),defaults.decoder,charset,"key"),val=utils.maybeMap(parseArrayValue(part.slice(pos+1),options),(function(encodedVal){return options.decoder(encodedVal,defaults.decoder,charset,"value")}))),val&&options.interpretNumericEntities&&"iso-8859-1"===charset&&(val=interpretNumericEntities(val)),part.indexOf("[]=")>-1&&(val=isArray(val)?[val]:val),has.call(obj,key)?obj[key]=utils.combine(obj[key],val):obj[key]=val}return obj}(str,options):str,obj=options.plainObjects?Object.create(null):{},keys=Object.keys(tempObj),i=0;i<keys.length;++i){var key=keys[i],newObj=parseKeys(key,tempObj[key],options,"string"==typeof str);obj=utils.merge(obj,newObj,options)}return!0===options.allowSparse?obj:utils.compact(obj)}},58261:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var getSideChannel=__webpack_require__(37478),utils=__webpack_require__(12769),formats=__webpack_require__(55798),has=Object.prototype.hasOwnProperty,arrayPrefixGenerators={brackets:function brackets(prefix){return prefix+"[]"},comma:"comma",indices:function indices(prefix,key){return prefix+"["+key+"]"},repeat:function repeat(prefix){return prefix}},isArray=Array.isArray,split=String.prototype.split,push=Array.prototype.push,pushToArray=function(arr,valueOrArray){push.apply(arr,isArray(valueOrArray)?valueOrArray:[valueOrArray])},toISO=Date.prototype.toISOString,defaultFormat=formats.default,defaults={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:utils.encode,encodeValuesOnly:!1,format:defaultFormat,formatter:formats.formatters[defaultFormat],indices:!1,serializeDate:function serializeDate(date){return toISO.call(date)},skipNulls:!1,strictNullHandling:!1},sentinel={},stringify=function stringify(object,prefix,generateArrayPrefix,commaRoundTrip,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,format,formatter,encodeValuesOnly,charset,sideChannel){for(var obj=object,tmpSc=sideChannel,step=0,findFlag=!1;void 0!==(tmpSc=tmpSc.get(sentinel))&&!findFlag;){var pos=tmpSc.get(object);if(step+=1,void 0!==pos){if(pos===step)throw new RangeError("Cyclic object value");findFlag=!0}void 0===tmpSc.get(sentinel)&&(step=0)}if("function"==typeof filter?obj=filter(prefix,obj):obj instanceof Date?obj=serializeDate(obj):"comma"===generateArrayPrefix&&isArray(obj)&&(obj=utils.maybeMap(obj,(function(value){return value instanceof Date?serializeDate(value):value}))),null===obj){if(strictNullHandling)return encoder&&!encodeValuesOnly?encoder(prefix,defaults.encoder,charset,"key",format):prefix;obj=""}if(function isNonNullishPrimitive(v){return"string"==typeof v||"number"==typeof v||"boolean"==typeof v||"symbol"==typeof v||"bigint"==typeof v}(obj)||utils.isBuffer(obj)){if(encoder){var keyValue=encodeValuesOnly?prefix:encoder(prefix,defaults.encoder,charset,"key",format);if("comma"===generateArrayPrefix&&encodeValuesOnly){for(var valuesArray=split.call(String(obj),","),valuesJoined="",i=0;i<valuesArray.length;++i)valuesJoined+=(0===i?"":",")+formatter(encoder(valuesArray[i],defaults.encoder,charset,"value",format));return[formatter(keyValue)+(commaRoundTrip&&isArray(obj)&&1===valuesArray.length?"[]":"")+"="+valuesJoined]}return[formatter(keyValue)+"="+formatter(encoder(obj,defaults.encoder,charset,"value",format))]}return[formatter(prefix)+"="+formatter(String(obj))]}var objKeys,values=[];if(void 0===obj)return values;if("comma"===generateArrayPrefix&&isArray(obj))objKeys=[{value:obj.length>0?obj.join(",")||null:void 0}];else if(isArray(filter))objKeys=filter;else{var keys=Object.keys(obj);objKeys=sort?keys.sort(sort):keys}for(var adjustedPrefix=commaRoundTrip&&isArray(obj)&&1===obj.length?prefix+"[]":prefix,j=0;j<objKeys.length;++j){var key=objKeys[j],value="object"==typeof key&&void 0!==key.value?key.value:obj[key];if(!skipNulls||null!==value){var keyPrefix=isArray(obj)?"function"==typeof generateArrayPrefix?generateArrayPrefix(adjustedPrefix,key):adjustedPrefix:adjustedPrefix+(allowDots?"."+key:"["+key+"]");sideChannel.set(object,step);var valueSideChannel=getSideChannel();valueSideChannel.set(sentinel,sideChannel),pushToArray(values,stringify(value,keyPrefix,generateArrayPrefix,commaRoundTrip,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,format,formatter,encodeValuesOnly,charset,valueSideChannel))}}return values};module.exports=function(object,opts){var objKeys,obj=object,options=function normalizeStringifyOptions(opts){if(!opts)return defaults;if(null!==opts.encoder&&void 0!==opts.encoder&&"function"!=typeof opts.encoder)throw new TypeError("Encoder has to be a function.");var charset=opts.charset||defaults.charset;if(void 0!==opts.charset&&"utf-8"!==opts.charset&&"iso-8859-1"!==opts.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var format=formats.default;if(void 0!==opts.format){if(!has.call(formats.formatters,opts.format))throw new TypeError("Unknown format option provided.");format=opts.format}var formatter=formats.formatters[format],filter=defaults.filter;return("function"==typeof opts.filter||isArray(opts.filter))&&(filter=opts.filter),{addQueryPrefix:"boolean"==typeof opts.addQueryPrefix?opts.addQueryPrefix:defaults.addQueryPrefix,allowDots:void 0===opts.allowDots?defaults.allowDots:!!opts.allowDots,charset:charset,charsetSentinel:"boolean"==typeof opts.charsetSentinel?opts.charsetSentinel:defaults.charsetSentinel,delimiter:void 0===opts.delimiter?defaults.delimiter:opts.delimiter,encode:"boolean"==typeof opts.encode?opts.encode:defaults.encode,encoder:"function"==typeof opts.encoder?opts.encoder:defaults.encoder,encodeValuesOnly:"boolean"==typeof opts.encodeValuesOnly?opts.encodeValuesOnly:defaults.encodeValuesOnly,filter:filter,format:format,formatter:formatter,serializeDate:"function"==typeof opts.serializeDate?opts.serializeDate:defaults.serializeDate,skipNulls:"boolean"==typeof opts.skipNulls?opts.skipNulls:defaults.skipNulls,sort:"function"==typeof opts.sort?opts.sort:null,strictNullHandling:"boolean"==typeof opts.strictNullHandling?opts.strictNullHandling:defaults.strictNullHandling}}(opts);"function"==typeof options.filter?obj=(0,options.filter)("",obj):isArray(options.filter)&&(objKeys=options.filter);var arrayFormat,keys=[];if("object"!=typeof obj||null===obj)return"";arrayFormat=opts&&opts.arrayFormat in arrayPrefixGenerators?opts.arrayFormat:opts&&"indices"in opts?opts.indices?"indices":"repeat":"indices";var generateArrayPrefix=arrayPrefixGenerators[arrayFormat];if(opts&&"commaRoundTrip"in opts&&"boolean"!=typeof opts.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var commaRoundTrip="comma"===generateArrayPrefix&&opts&&opts.commaRoundTrip;objKeys||(objKeys=Object.keys(obj)),options.sort&&objKeys.sort(options.sort);for(var sideChannel=getSideChannel(),i=0;i<objKeys.length;++i){var key=objKeys[i];options.skipNulls&&null===obj[key]||pushToArray(keys,stringify(obj[key],key,generateArrayPrefix,commaRoundTrip,options.strictNullHandling,options.skipNulls,options.encode?options.encoder:null,options.filter,options.sort,options.allowDots,options.serializeDate,options.format,options.formatter,options.encodeValuesOnly,options.charset,sideChannel))}var joined=keys.join(options.delimiter),prefix=!0===options.addQueryPrefix?"?":"";return options.charsetSentinel&&("iso-8859-1"===options.charset?prefix+="utf8=%26%2310003%3B&":prefix+="utf8=%E2%9C%93&"),joined.length>0?prefix+joined:""}},12769:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var formats=__webpack_require__(55798),has=Object.prototype.hasOwnProperty,isArray=Array.isArray,hexTable=function(){for(var array=[],i=0;i<256;++i)array.push("%"+((i<16?"0":"")+i.toString(16)).toUpperCase());return array}(),arrayToObject=function arrayToObject(source,options){for(var obj=options&&options.plainObjects?Object.create(null):{},i=0;i<source.length;++i)void 0!==source[i]&&(obj[i]=source[i]);return obj};module.exports={arrayToObject:arrayToObject,assign:function assignSingleSource(target,source){return Object.keys(source).reduce((function(acc,key){return acc[key]=source[key],acc}),target)},combine:function combine(a,b){return[].concat(a,b)},compact:function compact(value){for(var queue=[{obj:{o:value},prop:"o"}],refs=[],i=0;i<queue.length;++i)for(var item=queue[i],obj=item.obj[item.prop],keys=Object.keys(obj),j=0;j<keys.length;++j){var key=keys[j],val=obj[key];"object"==typeof val&&null!==val&&-1===refs.indexOf(val)&&(queue.push({obj:obj,prop:key}),refs.push(val))}return function compactQueue(queue){for(;queue.length>1;){var item=queue.pop(),obj=item.obj[item.prop];if(isArray(obj)){for(var compacted=[],j=0;j<obj.length;++j)void 0!==obj[j]&&compacted.push(obj[j]);item.obj[item.prop]=compacted}}}(queue),value},decode:function(str,decoder,charset){var strWithoutPlus=str.replace(/\+/g," ");if("iso-8859-1"===charset)return strWithoutPlus.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(strWithoutPlus)}catch(e){return strWithoutPlus}},encode:function encode(str,defaultEncoder,charset,kind,format){if(0===str.length)return str;var string=str;if("symbol"==typeof str?string=Symbol.prototype.toString.call(str):"string"!=typeof str&&(string=String(str)),"iso-8859-1"===charset)return escape(string).replace(/%u[0-9a-f]{4}/gi,(function($0){return"%26%23"+parseInt($0.slice(2),16)+"%3B"}));for(var out="",i=0;i<string.length;++i){var c=string.charCodeAt(i);45===c||46===c||95===c||126===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||format===formats.RFC1738&&(40===c||41===c)?out+=string.charAt(i):c<128?out+=hexTable[c]:c<2048?out+=hexTable[192|c>>6]+hexTable[128|63&c]:c<55296||c>=57344?out+=hexTable[224|c>>12]+hexTable[128|c>>6&63]+hexTable[128|63&c]:(i+=1,c=65536+((1023&c)<<10|1023&string.charCodeAt(i)),out+=hexTable[240|c>>18]+hexTable[128|c>>12&63]+hexTable[128|c>>6&63]+hexTable[128|63&c])}return out},isBuffer:function isBuffer(obj){return!(!obj||"object"!=typeof obj)&&!!(obj.constructor&&obj.constructor.isBuffer&&obj.constructor.isBuffer(obj))},isRegExp:function isRegExp(obj){return"[object RegExp]"===Object.prototype.toString.call(obj)},maybeMap:function maybeMap(val,fn){if(isArray(val)){for(var mapped=[],i=0;i<val.length;i+=1)mapped.push(fn(val[i]));return mapped}return fn(val)},merge:function merge(target,source,options){if(!source)return target;if("object"!=typeof source){if(isArray(target))target.push(source);else{if(!target||"object"!=typeof target)return[target,source];(options&&(options.plainObjects||options.allowPrototypes)||!has.call(Object.prototype,source))&&(target[source]=!0)}return target}if(!target||"object"!=typeof target)return[target].concat(source);var mergeTarget=target;return isArray(target)&&!isArray(source)&&(mergeTarget=arrayToObject(target,options)),isArray(target)&&isArray(source)?(source.forEach((function(item,i){if(has.call(target,i)){var targetItem=target[i];targetItem&&"object"==typeof targetItem&&item&&"object"==typeof item?target[i]=merge(targetItem,item,options):target.push(item)}else target[i]=item})),target):Object.keys(source).reduce((function(acc,key){var value=source[key];return has.call(acc,key)?acc[key]=merge(acc[key],value,options):acc[key]=value,acc}),mergeTarget)}}},37478:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var GetIntrinsic=__webpack_require__(40210),callBound=__webpack_require__(21924),inspect=__webpack_require__(70631),$TypeError=GetIntrinsic("%TypeError%"),$WeakMap=GetIntrinsic("%WeakMap%",!0),$Map=GetIntrinsic("%Map%",!0),$weakMapGet=callBound("WeakMap.prototype.get",!0),$weakMapSet=callBound("WeakMap.prototype.set",!0),$weakMapHas=callBound("WeakMap.prototype.has",!0),$mapGet=callBound("Map.prototype.get",!0),$mapSet=callBound("Map.prototype.set",!0),$mapHas=callBound("Map.prototype.has",!0),listGetNode=function(list,key){for(var curr,prev=list;null!==(curr=prev.next);prev=curr)if(curr.key===key)return prev.next=curr.next,curr.next=list.next,list.next=curr,curr};module.exports=function getSideChannel(){var $wm,$m,$o,channel={assert:function(key){if(!channel.has(key))throw new $TypeError("Side channel does not contain "+inspect(key))},get:function(key){if($WeakMap&&key&&("object"==typeof key||"function"==typeof key)){if($wm)return $weakMapGet($wm,key)}else if($Map){if($m)return $mapGet($m,key)}else if($o)return function(objects,key){var node=listGetNode(objects,key);return node&&node.value}($o,key)},has:function(key){if($WeakMap&&key&&("object"==typeof key||"function"==typeof key)){if($wm)return $weakMapHas($wm,key)}else if($Map){if($m)return $mapHas($m,key)}else if($o)return function(objects,key){return!!listGetNode(objects,key)}($o,key);return!1},set:function(key,value){$WeakMap&&key&&("object"==typeof key||"function"==typeof key)?($wm||($wm=new $WeakMap),$weakMapSet($wm,key,value)):$Map?($m||($m=new $Map),$mapSet($m,key,value)):($o||($o={key:{},next:null}),function(objects,key,value){var node=listGetNode(objects,key);node?node.value=value:objects.next={key:key,next:objects.next,value:value}}($o,key,value))}};return channel}},93343:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Api:function(){return network_Api},App:function(){return idg_App},AsyncService:function(){return idg_AsyncService},ContentType:function(){return ContentType},Controller:function(){return controller_Controller},ERROR_NETWORK:function(){return ERROR_NETWORK},ERROR_RESPONSE_401:function(){return ERROR_RESPONSE_401},ERROR_RESPONSE_403:function(){return ERROR_RESPONSE_403},ERROR_RESPONSE_404:function(){return ERROR_RESPONSE_404},ERROR_RESPONSE_503:function(){return ERROR_RESPONSE_503},ERROR_RESPONSE_FORMAT:function(){return ERROR_RESPONSE_FORMAT},Env:function(){return Env},IdempotentApi:function(){return network_IdempotentApi},Idg:function(){return idg_Idg},Locales:function(){return es_locale},Log:function(){return es_logger},Menus:function(){return es_menus},NetworkError:function(){return network_NetworkError},Resource:function(){return Resource},Service:function(){return idg_Service},Store:function(){return store_Store},decode:function(){return decode},encode:function(){return encode}});var vue_runtime_esm_js_=__webpack_require__(64078),vue_runtime_esm_js_default=__webpack_require__.n(vue_runtime_esm_js_),vue_i18n_esm_js_=__webpack_require__(68368),vue_i18n_esm_js_default=__webpack_require__.n(vue_i18n_esm_js_);vue_runtime_esm_js_default().use(vue_i18n_esm_js_default());var i18n=new(vue_i18n_esm_js_default());function locale_setStorageLanguageAndReload(appid,language){var href=location.href.replace(/lang=([a-zA-Z-]+)/,"lang=".concat(language));!function setStorageLanguage(appid,language){var langsStr=localStorage.getItem("@idg/idg/locale/language"),langs={};if(langsStr)try{langs=JSON.parse(langsStr)}catch(e){}langs[appid]=language,localStorage.setItem("@idg/idg/locale/language",JSON.stringify(langs))}(appid,language),window.location.href=href,location.href===href?window.location.reload():window.location.href=href}vue_runtime_esm_js_default().prototype.$l=function(key){if(!this.$idg)return"";if(!this.$package)return"";for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];return i18n.t.apply(i18n,["".concat(this.$idg.appid,".").concat(this.$package.name,".").concat(key)].concat(args))};var es_locale={getLanguage:function getLanguage(){return i18n.locale},setLanguage:function setLanguage(language){i18n.locale=language},i18n:i18n},index_js_=__webpack_require__(68212),index_js_default=__webpack_require__.n(index_js_),lib=__webpack_require__(80129),lib_default=__webpack_require__.n(lib),esm_index_js_=__webpack_require__(12243),tracing_esm_index_js_=__webpack_require__(52090);function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var inited=!1,Logger=function(){function Logger(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Logger),this._showDebug=!0}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Logger,[{key:"showDebug",get:function get(){return this._showDebug},set:function set(showDebug){this._showDebug=showDebug}},{key:"debug",value:function debug(TAG){var _console;if(this._showDebug){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];(_console=console).log.apply(_console,["[DEBUG]",TAG].concat(args))}}},{key:"info",value:function info(TAG){for(var _console2,_len2=arguments.length,args=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)args[_key2-1]=arguments[_key2];(_console2=console).log.apply(_console2,["[INFO]",TAG].concat(args))}},{key:"error",value:function error(TAG){for(var _console3,_len3=arguments.length,args=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)args[_key3-1]=arguments[_key3];(_console3=console).log.apply(_console3,["[ERROR]",TAG].concat(args))}},{key:"warn",value:function warn(TAG){for(var _console4,_len4=arguments.length,args=new Array(_len4>1?_len4-1:0),_key4=1;_key4<_len4;_key4++)args[_key4-1]=arguments[_key4];(_console4=console).warn.apply(_console4,["[WARN]",TAG].concat(args))}},{key:"log",value:function log(){var _console5;this._showDebug&&(_console5=console).log.apply(_console5,arguments)}},{key:"initSentry",value:function initSentry(sentryOptions,router){if(!inited){var tracingConfig={};sentryOptions.addRoutingInstrumentation&&(tracingConfig.routingInstrumentation=esm_index_js_.vueRouterInstrumentation(router)),inited=!0;var url=sentryOptions.url;esm_index_js_.init({Vue:vue_runtime_esm_js_default(),dsn:url,integrations:[new tracing_esm_index_js_.Integrations.BrowserTracing(tracingConfig)],tracesSampleRate:1})}}}]),Logger}(),Log=new Logger;Log.showDebug=location.href.indexOf("idg-debug=1")>=0;var logger_Log=Log;function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function Api_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var ContentType,ERROR_RESPONSE_401=401,ERROR_RESPONSE_403=403,ERROR_RESPONSE_404=404,ERROR_RESPONSE_503=503,ERROR_NETWORK=1e3,ERROR_RESPONSE_FORMAT=1001;!function(ContentType){ContentType.FORM_URLENCODED="application/x-www-form-urlencoded",ContentType.MULTIPART_FORM_DATA="multipart/form-data",ContentType.APPLICATION_JSON="application/json"}(ContentType||(ContentType={}));var Api=function(){function Api(httpOptions){var _this=this;!function Api_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Api),this.contentType=ContentType.FORM_URLENCODED,this.enableCache=!0,this.retryCount=0,this.type="Api",httpOptions&&httpOptions.idg&&(this.idg=httpOptions.idg);var idg=this.idg;this.httpOptions=httpOptions,this.options=Api.generateOptions(idg,httpOptions);var timeout=this.options.timeout;this.agent=index_js_default().create({timeout:timeout}),this.agent.interceptors.request.use((function(requestConfig){var config=_this.requestHandler(requestConfig);return _this.enableCache&&(config.id=config.params.IDG_CACHE_ID,delete config.params.IDG_CACHE_ID),_this.retryCount&&(config.retry=config.params.IDG_RETRY_COUNT,delete config.params.IDG_RETRY_COUNT),config}),(function(error){_this.removeCache(error),_this.errorHandler(error)})),this.agent.interceptors.response.use((function(response){return _this.removeCache(response),_this.responseHandler(response)}),(function(error){_this.removeCache(error);var retryRes=_this.retry(error);return retryRes||_this.errorHandler(error)}))}return function Api_createClass(Constructor,protoProps,staticProps){return protoProps&&Api_defineProperties(Constructor.prototype,protoProps),staticProps&&Api_defineProperties(Constructor,staticProps),Constructor}(Api,[{key:"request",value:function request(requestConfig){return this._request(requestConfig)}},{key:"getIdgHeaders",value:function getIdgHeaders(){return this.idg.app.getIdgHeaders(this.idg,this.options.requestStack)}},{key:"errorHandler",value:function errorHandler(error){return this.idg.app.errorHandler(error)}},{key:"requestHandler",value:function requestHandler(requestConfig){return this.idg.app.requestHandler(this,requestConfig,this.contentType),requestConfig}},{key:"responseHandler",value:function responseHandler(response){return this.idg.app.responseHandler(response)}},{key:"removeCache",value:function removeCache(response){if(this.enableCache){var config=response.config,index=Api.cacheRequests.findIndex((function(cacheRequest){return cacheRequest.id===config.id}));index>=0?Api.cacheRequests.splice(index,1):logger_Log.warn("network/Api","api response not cached")}}},{key:"retry",value:function retry(error){if(this.retryCount){var config=error.config;if(config.params||(config.params={}),config.params.IDG_RETRY_COUNT=config.retry||0,config.params.IDG_RETRY_COUNT!==this.retryCount)return config.params.IDG_RETRY_COUNT=config.params.IDG_RETRY_COUNT+1,config.url=config.url.replace(config.baseURL,""),config.data&&(config.data=lib_default().parse(config.data)),this.agent(error.config)}}},{key:"_request",value:function _request(requestConfig){var _this2=this,idg=this.idg;requestConfig.baseURL||(requestConfig.baseURL=idg.app.getBaseURL(idg,this.httpOptions));var headers=this.getIdgHeaders(),method=requestConfig.method,url=requestConfig.url,data=requestConfig.data;if(!this.enableCache)return this.agent.request(requestConfig);var cacahe=Api.cacheRequests.find((function(cacheRequest){return _this2.equealRequest(_objectSpread(_objectSpread({type:_this2.type},requestConfig),{},{headers:headers}),cacheRequest)}));if(cacahe)return cacahe.promise;var id=++Api.id;requestConfig.params||(requestConfig.params={}),requestConfig.params.IDG_CACHE_ID=id;var promise=this.agent.request(requestConfig);return Api.cacheRequests.push({id:id,type:this.type,requestConfig:{headers:headers,data:data,url:url,method:method},promise:promise}),promise}},{key:"equealRequest",value:function equealRequest(requestConfig,cacheRequest){var headers=requestConfig.headers,data=requestConfig.data,euqalHeaders=JSON.stringify(headers)===JSON.stringify(cacheRequest.requestConfig.headers),equalData=lib_default().stringify(data)===lib_default().stringify(cacheRequest.requestConfig.data),equalParams=lib_default().stringify(requestConfig.params)===lib_default().stringify(cacheRequest.requestConfig.params),equalMethod=requestConfig.method===cacheRequest.requestConfig.method,equalUrl=requestConfig.url===cacheRequest.requestConfig.url,equalType=requestConfig.type===cacheRequest.type;return euqalHeaders&&equalData&&equalMethod&&equalUrl&&equalParams&&equalType}}],[{key:"generateOptions",value:function generateOptions(idg,httpOptions){return Object.assign({},Api.DEFAULT_OPTIONS,httpOptions)}},{key:"generateData",value:function generateData(data,contentType){if(contentType===ContentType.FORM_URLENCODED)return lib_default().stringify(data);if(contentType===ContentType.MULTIPART_FORM_DATA){var formData=new FormData;return Api.makeFormData(data,formData),formData}return contentType===ContentType.APPLICATION_JSON?JSON.stringify(data):void 0}},{key:"makeFormData",value:function makeFormData(obj,formData){var data=[];if(obj instanceof File)data.push({key:"",value:obj});else if(obj instanceof Array)for(var j=0,len=obj.length;j<len;j++)for(var arr=Api.makeFormData(obj[j]),k=0,l=arr.length;k<l;k++){var key=formData?j+arr[k].key:"["+j+"]"+arr[k].key;data.push({key:key,value:arr[k].value})}else"object"===_typeof(obj)?Object.keys(obj).forEach((function(j){for(var arr=Api.makeFormData(obj[j]),_k=0,_l=arr.length;_k<_l;_k++){var _key=formData?j+arr[_k].key:"["+j+"]"+arr[_k].key;data.push({key:_key,value:arr[_k].value})}})):data.push({key:"",value:obj});if(!formData)return data;for(var i=0,_len=data.length;i<_len;i++)formData.append(data[i].key,data[i].value)}}]),Api}();Api.id=0,Api.cacheRequests=[],Api.DEFAULT_OPTIONS={timeout:5e3};var network_Api=Api,localforage_js_=__webpack_require__(84351),localforage_js_default=__webpack_require__.n(localforage_js_);function Storage_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var Storage=function(){function Storage(idg){!function Storage_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Storage),this.id=idg.appid,this.storage=localforage_js_default().createInstance({name:this.id})}return function Storage_createClass(Constructor,protoProps,staticProps){return protoProps&&Storage_defineProperties(Constructor.prototype,protoProps),staticProps&&Storage_defineProperties(Constructor,staticProps),Constructor}(Storage,[{key:"getItem",value:function getItem(key){return this.storage.getItem(key)}},{key:"setItem",value:function setItem(key,value){return this.storage.setItem(key,value)}},{key:"removeItem",value:function removeItem(key){return this.storage.removeItem(key)}},{key:"clear",value:function clear(){return this.storage.clear()}},{key:"destroy",value:function destroy(){localforage_js_default().dropInstance({name:this.id})}}]),Storage}(),storage_Storage=Storage,vuex_esm_js_=__webpack_require__(40760),vuex_esm_js_default=__webpack_require__.n(vuex_esm_js_);function Store_typeof(obj){return Store_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Store_typeof(obj)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==Store_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}vue_runtime_esm_js_default().use(vuex_esm_js_default());var Store=function(_VueStore){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Store,_VueStore);var _super=_createSuper(Store);function Store(options,pkg,idg){var _this;return function Store_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Store),(_this=_super.call(this,options)).package=pkg,_this.idg=idg,_this}return Store}(vuex_esm_js_.Store),store_Store=Store,lodash_js_=__webpack_require__(22791),lodash_js_default=__webpack_require__.n(lodash_js_);function IdempotentApi_typeof(obj){return IdempotentApi_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},IdempotentApi_typeof(obj)}function IdempotentApi_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _get(target,property,receiver){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(target,property,receiver){var base=function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=IdempotentApi_getPrototypeOf(object)););return object}(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(receiver):desc.value}},_get(target,property,receiver||target)}function IdempotentApi_setPrototypeOf(o,p){return IdempotentApi_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},IdempotentApi_setPrototypeOf(o,p)}function IdempotentApi_createSuper(Derived){var hasNativeReflectConstruct=function IdempotentApi_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=IdempotentApi_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=IdempotentApi_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return IdempotentApi_possibleConstructorReturn(this,result)}}function IdempotentApi_possibleConstructorReturn(self,call){return!call||"object"!==IdempotentApi_typeof(call)&&"function"!=typeof call?function IdempotentApi_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function IdempotentApi_getPrototypeOf(o){return IdempotentApi_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},IdempotentApi_getPrototypeOf(o)}var IdempotentApi=function(_Api){!function IdempotentApi_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&IdempotentApi_setPrototypeOf(subClass,superClass)}(IdempotentApi,_Api);var _super=IdempotentApi_createSuper(IdempotentApi);function IdempotentApi(httpOptions){var _this;return function IdempotentApi_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,IdempotentApi),(_this=_super.call(this,httpOptions)).idempotentToken=_this.gennerateToken(),_this}return function IdempotentApi_createClass(Constructor,protoProps,staticProps){return protoProps&&IdempotentApi_defineProperties(Constructor.prototype,protoProps),staticProps&&IdempotentApi_defineProperties(Constructor,staticProps),Constructor}(IdempotentApi,[{key:"request",value:function request(requestConfig){return requestConfig.refresh&&(this.idempotentToken=this.gennerateToken()),this.appendToken(requestConfig),_get(IdempotentApi_getPrototypeOf(IdempotentApi.prototype),"_request",this).call(this,requestConfig)}},{key:"appendToken",value:function appendToken(requestConfig){requestConfig.headers||(requestConfig.headers={}),requestConfig.headers.IdempotentToken=this.idempotentToken}},{key:"gennerateToken",value:function gennerateToken(){return(new Date).getMilliseconds()+""}}]),IdempotentApi}(network_Api),network_IdempotentApi=IdempotentApi;function NetworkError_typeof(obj){return NetworkError_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},NetworkError_typeof(obj)}function NetworkError_possibleConstructorReturn(self,call){return!call||"object"!==NetworkError_typeof(call)&&"function"!=typeof call?function NetworkError_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _wrapNativeSuper(Class){var _cache="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function _wrapNativeSuper(Class){if(null===Class||!function _isNativeFunction(fn){return-1!==Function.toString.call(fn).indexOf("[native code]")}(Class))return Class;if("function"!=typeof Class)throw new TypeError("Super expression must either be null or a function");if(void 0!==_cache){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,NetworkError_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),NetworkError_setPrototypeOf(Wrapper,Class)},_wrapNativeSuper(Class)}function _construct(Parent,args,Class){return _construct=NetworkError_isNativeReflectConstruct()?Reflect.construct:function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&NetworkError_setPrototypeOf(instance,Class.prototype),instance},_construct.apply(null,arguments)}function NetworkError_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function NetworkError_setPrototypeOf(o,p){return NetworkError_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},NetworkError_setPrototypeOf(o,p)}function NetworkError_getPrototypeOf(o){return NetworkError_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},NetworkError_getPrototypeOf(o)}var NetworkError=function(_Error){!function NetworkError_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&NetworkError_setPrototypeOf(subClass,superClass)}(NetworkError,_Error);var _super=function NetworkError_createSuper(Derived){var hasNativeReflectConstruct=NetworkError_isNativeReflectConstruct();return function _createSuperInternal(){var result,Super=NetworkError_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=NetworkError_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return NetworkError_possibleConstructorReturn(this,result)}}(NetworkError);function NetworkError(code,message){var _this;return function NetworkError_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,NetworkError),(_this=_super.call(this,message)).code=code,_this.message=message,_this}return NetworkError}(_wrapNativeSuper(Error)),network_NetworkError=NetworkError;function CallApi_typeof(obj){return CallApi_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},CallApi_typeof(obj)}function CallApi_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function CallApi_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function CallApi_setPrototypeOf(o,p){return CallApi_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},CallApi_setPrototypeOf(o,p)}function CallApi_createSuper(Derived){var hasNativeReflectConstruct=function CallApi_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=CallApi_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=CallApi_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return CallApi_possibleConstructorReturn(this,result)}}function CallApi_possibleConstructorReturn(self,call){return!call||"object"!==CallApi_typeof(call)&&"function"!=typeof call?function CallApi_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function CallApi_getPrototypeOf(o){return CallApi_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},CallApi_getPrototypeOf(o)}var CallApi=function(_Api){!function CallApi_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&CallApi_setPrototypeOf(subClass,superClass)}(CallApi,_Api);var _super=CallApi_createSuper(CallApi);function CallApi(){var _this;return CallApi_classCallCheck(this,CallApi),(_this=_super.apply(this,arguments)).type="CallApi",_this}return function CallApi_createClass(Constructor,protoProps,staticProps){return protoProps&&CallApi_defineProperties(Constructor.prototype,protoProps),staticProps&&CallApi_defineProperties(Constructor,staticProps),Constructor}(CallApi,[{key:"responseHandler",value:function responseHandler(response){return response.data?response.data:Promise.reject(new network_NetworkError(ERROR_RESPONSE_FORMAT,"no data"))}}]),CallApi}(network_Api);function IdgRouter_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var IdgRouter=function(){function IdgRouter(idg){!function IdgRouter_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,IdgRouter),this.idg=idg}return function IdgRouter_createClass(Constructor,protoProps,staticProps){return protoProps&&IdgRouter_defineProperties(Constructor.prototype,protoProps),staticProps&&IdgRouter_defineProperties(Constructor,staticProps),Constructor}(IdgRouter,[{key:"vueRouter",get:function get(){return this.idg.root.routerManager.router}},{key:"currentRoute",get:function get(){return this.vueRouter.currentRoute}},{key:"replace",value:function replace(location,onComplete,onAbort){var _location=this.getLocation(location);this.vueRouter.replace(_location,onComplete,onAbort)}},{key:"resolve",value:function resolve(to,current,append){return this.vueRouter.resolve(to,current,append)}},{key:"push",value:function push(location,onComplete,onAbort){var _location=this.getLocation(location);this.vueRouter.push(_location,onComplete,onAbort)}},{key:"go",value:function go(n){this.vueRouter.go(n)}},{key:"back",value:function back(){this.vueRouter.back()}},{key:"forward",value:function forward(){this.vueRouter.forward()}},{key:"getLocation",value:function getLocation(location){if("string"==typeof location)return location;var name=location.name;name&&this.idg.root.routerManager.setCurrentRoute({name:name,idg:this.idg,page:location.page});return location}}]),IdgRouter}();function Idg_typeof(obj){return Idg_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Idg_typeof(obj)}function Idg_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function Idg_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function Idg_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&Idg_setPrototypeOf(subClass,superClass)}function Idg_setPrototypeOf(o,p){return Idg_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},Idg_setPrototypeOf(o,p)}function Idg_createSuper(Derived){var hasNativeReflectConstruct=function Idg_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=Idg_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Idg_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Idg_possibleConstructorReturn(this,result)}}function Idg_possibleConstructorReturn(self,call){return!call||"object"!==Idg_typeof(call)&&"function"!=typeof call?function Idg_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function Idg_getPrototypeOf(o){return Idg_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},Idg_getPrototypeOf(o)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function Idg_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function Idg_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var Idg_TAG="package/Idg",sID=0;function getSid(){return sID+=1}var Idg=function(){function Idg(idgOptions,config){Idg_classCallCheck(this,Idg),this.async=!1,this.name="",this.packageInstances=[];var appid=idgOptions.appid,serviceAppid=idgOptions.serviceAppid,channelOptions=idgOptions.channelOptions,packages=idgOptions.packages,children=idgOptions.children;this.config=config,this.appid=appid,this.serviceAppid=serviceAppid||appid,this.channelOptions=channelOptions,this.channelOptions.name&&(this.name=this.channelOptions.name),this.packages=packages,this.children=children,this.routes=[],this.components={},this.pages={},this.apis={},this.stores={},this.options={},this.controllers={},this.pool={},this.sid=getSid(),this.idgRouter=new IdgRouter(this)}return function Idg_createClass(Constructor,protoProps,staticProps){return protoProps&&Idg_defineProperties(Constructor.prototype,protoProps),staticProps&&Idg_defineProperties(Constructor,staticProps),Constructor}(Idg,[{key:"storage",get:function get(){return this.pStorage||(this.pStorage=new storage_Storage(this)),this.pStorage}},{key:"routerPush",value:function routerPush(location,onComplete,onAbort){this.idgRouter.push(location,onComplete,onAbort)}},{key:"setAddRouteConfig",value:function setAddRouteConfig(addRouteConfig){this.addRouteConfig=addRouteConfig}},{key:"init",value:function init(){var _this=this;this.children&&this.children.forEach((function(child){_this.initChild(child)}))}},{key:"initChild",value:function initChild(child){child.setRoot(this.root||this),child.auth||child.setApp(this.app||this),child.setParent(this),child.init()}},{key:"getChannelOptions",value:function getChannelOptions(){return this.channelOptions&&"function"==typeof this.channelOptions.getChannelOptions?this.channelOptions.getChannelOptions(this):this.channelOptions}},{key:"register",value:function register(){var _this2=this;this.packages&&(logger_Log.debug(Idg_TAG,"register",this.appid,this),this.packages.forEach((function(pkg){logger_Log.debug(Idg_TAG,"register pkg",pkg.name,pkg),_this2.registerOptions(pkg);var $store=_this2.registerStores(pkg);_this2.registerApis(pkg),_this2.registerControllers(pkg),_this2.registerComponents(pkg),_this2.registerPages(pkg),_this2.registerLocales(pkg),_this2.registerRoutes(pkg);var packageInstance={idg:_this2,$l:function $l(key){return function locale_$l(packageInstance,key){for(var _len2=arguments.length,args=new Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++)args[_key2-2]=arguments[_key2];return i18n.t.apply(i18n,["".concat(packageInstance.idg.appid,".").concat(packageInstance.package.name,".").concat(key)].concat(args))}(this,key)},$store:$store,package:pkg};_this2.root.routerManager.registerHooks(packageInstance),pkg.registered&&(pkg.registered(packageInstance),_this2.packageInstances.push(packageInstance))}))),this.children&&this.children.forEach((function(child){child.register()}))}},{key:"inject",value:function inject(){this.children&&this.children.forEach((function(child){child.inject()})),this.injectControllers(),this.injectComponents(),this.injectPages()}},{key:"injectRoutes",value:function injectRoutes(){this.addRoutes(),this.children&&this.children.forEach((function(child){child.injectRoutes()}))}},{key:"setParent",value:function setParent(parentPacakge){this.parent=parentPacakge}},{key:"setRoot",value:function setRoot(app){this.root=app}},{key:"setApp",value:function setApp(app){this.app=app}},{key:"redirect",value:function redirect(location){this.root.routerManager.router.push(location)}},{key:"callService",value:function callService(requestConfig){console.warn("The api [Idg.callService] is desperated please use [Idg.callApi] instead");var httpOptions=network_Api.generateOptions(this);httpOptions.baseURL?requestConfig.baseURL=httpOptions.baseURL:requestConfig.baseURL=this.app.getBaseURL(this,requestConfig),requestConfig.params||(requestConfig.params={});var requestStack=[].concat(this.getRequestStack(),requestConfig.requestStack);this.app.checkRequstStack(requestStack);var headers={RequestStack:JSON.stringify(requestStack)},token=this.app.getToken();return token&&(headers.Authorization=token),requestConfig.headers=headers,requestConfig.headers["Content-Type"]=requestConfig.headers["Content-Type"]||ContentType.FORM_URLENCODED,requestConfig.data=network_Api.generateData(requestConfig.data,requestConfig.headers["Content-Type"]),index_js_default().request(requestConfig)}},{key:"redirectIndex",value:function redirectIndex(onComplete,onAbort){this.root.routerManager.router.push({name:"index"},onComplete,onAbort)}},{key:"callApi",value:function callApi(requestConfig){return requestConfig.idg=this,new CallApi(requestConfig).request(requestConfig)}},{key:"findPackageInstance",value:function findPackageInstance(pkgName){return this.packageInstances.find((function(pkg){return pkg.package.name===pkgName}))}},{key:"findChildByAppid",value:function findChildByAppid(appid){if(this.children){var child=this.children.find((function(child){return child.appid===appid}));if(child)return child}}},{key:"setChannelOptions",value:function setChannelOptions(params){var appid=params.appid,appkey=params.appkey,channel=params.channel,channelAlias=params.channelAlias,find=this.findChildByAppid(appid);if(!find)throw console.log(appid,this),new Error("");if(channelAlias)find.channelOptions={channelAlias:channelAlias};else{if(!appkey||void 0===channel)throw console.log(params),new Error("");find.channelOptions={appkey:appkey,channel:channel}}}},{key:"findChildByName",value:function findChildByName(name){if(this.children)return this.children.find((function(child){return child.name===name}))}},{key:"findChildByChannelOption",value:function findChildByChannelOption(appid,channelOption){if(this.children){var child=this.children.find((function(child){return child.appid===appid&&JSON.stringify(child.channelOptions)===JSON.stringify(channelOption)}));if(child)return child}}},{key:"addChild",value:function addChild(idg){console.warn("The api [Idg.addChild] will be desperated in the future, please use [Idg.dynamicAddChild] instead");var child=this.findChildByChannelOption(idg.appid,idg.channelOptions);return child||(this.children||(this.children=[]),this.children.push(idg),this.init(),this.register(),this.inject(),this.injectRoutes(),idg)}},{key:"dynamicAddChild",value:function dynamicAddChild(idg){var child=this.findChildByChannelOption(idg.appid,idg.channelOptions);return child||(this.children||(this.children=[]),this.children.push(idg),this.initChild(idg),idg.register(),idg.inject(),idg.injectRoutes(),idg)}},{key:"removeChild",value:function removeChild(idg){if(this.children){var index=this.children.findIndex((function(child){return child===idg}));index>=0&&this.children.splice(index,1)}}},{key:"getPage",value:function getPage(pageId){return this.getAsyncComponent(pageId,"pages")}},{key:"getComponent",value:function getComponent(componentId){return this.getAsyncComponent(componentId,"components")}},{key:"getAsyncComponent",value:function getAsyncComponent(componentId,type){var _this3=this,dependId=componentId,targetIdg=this.getAsyncIdg(dependId);if(targetIdg&&targetIdg.async){var asyncComponent=function(){var _ref=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(){var Comp,self;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:"pages"===type&&_this3.app.setRouteLoading(!0);case 1:if(!targetIdg||!targetIdg.async){_context.next=15;break}return _context.prev=2,console.log("load async service",targetIdg),_context.next=6,targetIdg.load();case 6:targetIdg=_this3.getAsyncIdg(dependId),_context.next=13;break;case 9:_context.prev=9,_context.t0=_context.catch(2),console.log("load service error",dependId,targetIdg,_context.t0),targetIdg=void 0;case 13:_context.next=1;break;case 15:return"pages"===type&&_this3.app.setRouteLoading(!1),Comp=_this3.getById(dependId,type),self=_this3,Comp||console.log("load service getComp error",Comp,self,dependId),_context.abrupt("return",Comp);case 20:case"end":return _context.stop()}}),_callee,null,[[2,9]])})));return function asyncComponent(){return _ref.apply(this,arguments)}}();return asyncComponent.AsyncComponent=!0,asyncComponent}return this.getById(componentId,type)}},{key:"getApi",value:function getApi(apiId){return this.getById(apiId,"apis")}},{key:"getController",value:function getController(apiId){return this.getById(apiId,"controllers")}},{key:"getRequestStack",value:function getRequestStack(){for(var requestStack=[],parent=this,isApp=!1;!isApp&&parent;){isApp=parent instanceof idg_App;var channelOptions=parent.getChannelOptions();if(channelOptions){var item=void 0;if(channelOptions.channelAlias){var channelAlias=parent.getChannelOptions().channelAlias;item={appid:parent.serviceAppid,channelAlias:channelAlias}}else{var dynamicChannelOptions=parent.getChannelOptions(),appkey=dynamicChannelOptions.appkey,channel=dynamicChannelOptions.channel;if(!appkey)throw new Error("invalid appkey");if(!channel&&0!==channel)throw new Error("invalid channel");item={appid:parent.serviceAppid,appkey:appkey,channel:channel}}if(!item.appid)throw new Error("no appid");requestStack.unshift(item),parent=parent.parent}else logger_Log.warn(Idg_TAG,"getRequestStack no channelOptions",channelOptions,parent)}return requestStack}},{key:"getPath",value:function getPath(id){var ids=id.split(".");if(ids.length<3)throw new Error("need absolute path like xxx.xx.xxx");var parent=this;ids[0]===this.appid&&(parent=this.parent);for(var stack=ids.slice(0,-2);parent;){var item;item=parent.name?parent.appid+":"+parent.name:parent.appid,stack.unshift(item),parent=parent.parent}return stack.join(".")}},{key:"getById",value:function getById(id,key){var ids=id.split("."),appid=ids[0];logger_Log.debug(Idg_TAG,"getById",id,key,this);var child,splits=appid.split(":");if(1===splits.length)child=this.findChildByAppid(appid);else{if(2!==splits.length)throw new Error("invalid appid");appid=splits[0],child=this.findChildByChannelOption(appid,{channelAlias:splits[1]})}if(ids.length>3){var finded=appid===this.appid?this:appid===(this.parent&&this.parent.appid)?this.parent:child;if(!finded||!finded[key])return;return ids.shift(),logger_Log.debug(Idg_TAG,"getById finded",finded),finded.getById(ids.join("."),key)}var rid=id.split(".").map((function(i){return i.indexOf(":")>=0?i.slice(0,i.indexOf(":")):i})).join(".");if(appid===this.appid){if(!this[key])return;return logger_Log.debug(Idg_TAG,"getById0",this[key][rid]),this[key][rid]}if(this.parent&&appid===this.parent.appid){if(!this.parent||!this.parent[key])return;return logger_Log.debug(Idg_TAG,"getById1",this.parent),this.parent[key][rid]}if(child&&child[key])return logger_Log.debug(Idg_TAG,"getById2",child),child[key][rid]}},{key:"getIdg",value:function getIdg(id){var child,ids=id.split("."),appid=ids[0],splits=appid.split(":");if(1===splits.length)child=this.findChildByAppid(appid);else{if(2!==splits.length)throw new Error("invalid appid");appid=splits[0],child=this.findChildByChannelOption(appid,{channelAlias:splits[1]})}if(ids.length>3){var finded=appid===this.appid?this:appid===(this.parent&&this.parent.appid)?this.parent:child;if(!finded)return;return ids.shift(),logger_Log.debug(Idg_TAG,"getById finded",finded),finded.getIdg(ids.join("."))}return appid===this.appid?this:this.parent&&appid===this.parent.appid?this.parent:child}},{key:"getAsyncIdg",value:function getAsyncIdg(id){var ids=id.split("."),appid=ids[0];logger_Log.debug(Idg_TAG,"findById",id,this);var child,splits=appid.split(":");if(1===splits.length)child=this.findChildByAppid(appid);else{if(2!==splits.length)throw new Error("invalid appid");appid=splits[0],child=this.findChildByChannelOption(appid,{channelAlias:splits[1]})}if(ids.length>3){var finded=appid===this.appid?this:appid===(this.parent&&this.parent.appid)?this.parent:child;if(!finded)return;return ids.shift(),logger_Log.debug(Idg_TAG,"getAsyncIdg finded",finded),finded.async?finded:finded.getAsyncIdg?finded.getAsyncIdg(ids.join(".")):void 0}return appid===this.appid?this:this.parent&&appid===this.parent.appid?this.parent:child||void 0}},{key:"generateId",value:function generateId(id,pkg,idg){var ids=id.split(".");return 1===ids.length&&ids.unshift(pkg.name),2===ids.length&&ids.unshift(idg.appid),ids.join(".")}},{key:"filterDepends",value:function filterDepends(depends,key){var _this4=this;return depends.filter((function(depend){return("string"==typeof depend?depend:depend.id).startsWith(key+".")})).map((function(depend){var id="",variableName="";return"string"==typeof depend?(id=depend,variableName=_this4.getDefaultVariableName(id,key)):(id=depend.id,variableName=depend.variableName),{id:id.slice(key.length+1),variableName:variableName}}))}},{key:"addRoutes",value:function addRoutes(){var routes=this.routes;this.root.routerManager.addRoutes(this,routes)}},{key:"injectControllers",value:function injectControllers(){var _this5=this;Object.keys(this.controllers).forEach((function(controller){_this5.injectController(_this5.controllers[controller])}))}},{key:"injectController",value:function injectController(controller){this.injectcControllerApi(controller),this.injectcControllerController(controller)}},{key:"injectComponents",value:function injectComponents(){var _this6=this;Object.keys(this.components).forEach((function(component){_this6.injectcComponentApi(_this6.components[component])})),Object.keys(this.components).forEach((function(component){_this6.injectcComponentController(_this6.components[component])})),Object.keys(this.components).forEach((function(component){_this6.injectComponent(_this6.components[component])}))}},{key:"injectPages",value:function injectPages(){var _this7=this;Object.keys(this.pages).forEach((function(component){_this7.injectcComponentApi(_this7.pages[component])})),Object.keys(this.pages).forEach((function(component){_this7.injectcComponentController(_this7.pages[component])})),Object.keys(this.pages).forEach((function(page){_this7.injectPage(_this7.pages[page])}))}},{key:"injectcComponentController",value:function injectcComponentController(Ctor){if(Ctor.options&&Ctor.options.depends){var depends=this.filterDepends(Ctor.options.depends,"controller");this.injectcController(Ctor,depends)}}},{key:"injectcController",value:function injectcController(Ctor,depends){this.injectDepends(Ctor,depends,"controllers")}},{key:"injectcComponentApi",value:function injectcComponentApi(Ctor){if(Ctor.options&&Ctor.options.depends){var depends=this.filterDepends(Ctor.options.depends,"api");this.injectApi(Ctor,depends)}}},{key:"injectcControllerApi",value:function injectcControllerApi(Ctor){if(Ctor.depends){var depends=this.filterDepends(Ctor.depends,"api");this.injectApi(Ctor,depends)}}},{key:"injectcControllerController",value:function injectcControllerController(Ctor){if(Ctor.depends){var depends=this.filterDepends(Ctor.depends,"controller");this.injectDepends(Ctor,depends,"controllers")}}},{key:"injectApi",value:function injectApi(Ctor,depends){this.injectDepends(Ctor,depends,"apis")}},{key:"injectDepends",value:function injectDepends(Ctor,depends,key){var _this8=this,pkg=Ctor.prototype.$package,dependCtors={},self=this;pkg?(depends.forEach((function(depend){var id=_this8.generateId(depend.id,pkg,_this8),instanceName=depend.variableName,registerCtor=_this8.getById(id,key);if(!registerCtor)throw logger_Log.debug(Idg_TAG,"current idg",self),_this8.getById(id,key),new Error("".concat(id," not registered, please register first"));_this8.pool[id]||(_this8.pool[id]=new registerCtor),dependCtors[instanceName]=_this8.pool[id]})),Object.keys(dependCtors).forEach((function(instanceName){Ctor.prototype[instanceName]=dependCtors[instanceName],_this8.injects||(_this8.injects=[]);var depend=dependCtors[instanceName];_this8.injects.push({key:instanceName,value:depend&&depend.sid?depend.sid:instanceName}),logger_Log.debug("Idg","".concat(Ctor.ctorName," injectDepend ").concat(instanceName))}))):logger_Log.warn(Idg_TAG,"injectDepends: pkg not found",Ctor.ctorName,Ctor,depends,key,self)}},{key:"injectComponent",value:function injectComponent(Ctor){return this.injectComponentOrPage(Ctor,"components")}},{key:"injectPage",value:function injectPage(Ctor){return this.injectComponentOrPage(Ctor,"pages")}},{key:"injectComponentOrPage",value:function injectComponentOrPage(Ctor,key){var _this9=this;if(!0===Ctor.injected||!Ctor.options||!Ctor.options.depends)return Ctor;var depends=this.filterDepends(Ctor.options.depends,"component"),dependComponents={},pkg=Ctor.package,self=this;depends.forEach((function(depend){var dependStrs=depend.id.split("."),dependName=dependStrs[dependStrs.length-1],dependId=_this9.generateId(depend.id,pkg,_this9),dependComponent=_this9.getComponent(dependId);dependComponent?dependComponent.prototype.$idg?(logger_Log.debug("Idg","injectComponent ".concat(dependName),depends),dependComponents[depend.variableName]=_this9.injectComponent(dependComponent)):dependComponents[depend.variableName]=dependComponent:logger_Log.warn("Idg","injectComponent depend component not found",dependId,self)}));var options={components:dependComponents},extendCtor=Ctor.extend(options);if(extendCtor.injected=!0,!Ctor.ctorName)throw logger_Log.debug(Idg_TAG,"current idg",this),new Error("no ctorName found in Ctor");var componentId=this.generateId(Ctor.ctorName,Ctor.package,this);return this[key][componentId]=extendCtor,extendCtor}},{key:"getDefaultVariableName",value:function getDefaultVariableName(id,key){var ids=id.split("."),dependName=ids.length>1?ids[ids.length-1]:id;if("component"===key)return dependName;var characters=dependName.split("");return characters.length>0&&(characters[0]=characters[0].toLowerCase()),characters.join("")}},{key:"registerApis",value:function registerApis(pkg){var _this10=this;if(pkg.apis){var apis=pkg.apis;Object.keys(apis).forEach((function(apiName){var apiId=_this10.generateId(apiName,pkg,_this10);_this10.apis[apiId]=_this10.decorateApi(apiName,apis[apiName])}))}}},{key:"registerControllers",value:function registerControllers(pkg){var _this11=this;if(pkg.controllers){var controllers=pkg.controllers;Object.keys(controllers).forEach((function(controlerName){var controlerId=_this11.generateId(controlerName,pkg,_this11);_this11.controllers[controlerId]=_this11.decorateController(controlerName,controllers[controlerName],pkg)}))}}},{key:"decorateApi",value:function decorateApi(apiName,Ctor){var IdgApi=function(_Ctor){Idg_inherits(IdgApi,_Ctor);var _super=Idg_createSuper(IdgApi);function IdgApi(){return Idg_classCallCheck(this,IdgApi),_super.apply(this,arguments)}return IdgApi}(Ctor);return IdgApi.prototype.sid=getSid(),IdgApi.prototype.idg=this,IdgApi}},{key:"decorateController",value:function decorateController(ctorName,Ctor,pkg){var IdgController=function(_Ctor2){Idg_inherits(IdgController,_Ctor2);var _super2=Idg_createSuper(IdgController);function IdgController(){return Idg_classCallCheck(this,IdgController),_super2.apply(this,arguments)}return IdgController}(Ctor);return IdgController.prototype.idg=this,IdgController.prototype.$idg=this,IdgController.prototype.sid=getSid(),IdgController.prototype.decorated=!0,IdgController.prototype.ctorName=ctorName,IdgController.prototype.$package=pkg,IdgController.prototype.store=this.stores[this.generateId("store",pkg,this)],IdgController}},{key:"registerComponents",value:function registerComponents(pkg){logger_Log.debug(Idg_TAG,"registerComponents",pkg),this.registerComponentsOrPages(pkg,"components")}},{key:"registerPages",value:function registerPages(pkg){logger_Log.debug(Idg_TAG,"registerPages",pkg),this.registerComponentsOrPages(pkg,"pages")}},{key:"registerComponentsOrPages",value:function registerComponentsOrPages(pkg,key){var _this12=this;if(pkg[key]){var components=pkg[key];Object.keys(components).forEach((function(componentName){var decoratedName=_this12.generateId(componentName,pkg,_this12),component=components[componentName],decoratedComponent=_this12.decorateComponent(componentName,component,pkg,key);_this12[key][decoratedName]=decoratedComponent}))}}},{key:"decorateComponent",value:function decorateComponent(componentName,component,pkg,key){logger_Log.debug(Idg_TAG,"decorateComponent",componentName,key,pkg);var originCtor=component;if(originCtor.decorated)return originCtor;var Ctor=vue_runtime_esm_js_default().extend(originCtor),storeOptions=this.stores[this.generateId("store",pkg,this)];storeOptions&&(Ctor=Ctor.extend({store:storeOptions}));var idgRouter=this.idgRouter,routerOptions={beforeCreate:function beforeCreate(){Object.defineProperty(this,"$router",{get:function get(){return idgRouter}})}};Ctor=Ctor.extend(routerOptions);var options=this.options[this.generateId("options",pkg,this)];options&&(Ctor=Ctor.extend(options));var extendedCtor=this.extendComponet(Ctor);return extendedCtor.prototype.$app=this.app,extendedCtor.prototype.$root=this.root,extendedCtor.prototype.$idg=this,extendedCtor.prototype.$package=pkg,extendedCtor.prototype.getComponent=function(componentId){var dependStrs=componentId.split(".");if(dependStrs.length>3)return this.logger.warn("Idg decorateComponent","invalid depend component",componentId),null;var $idg=this.$idg,$package=this.$package;return 1===dependStrs.length&&dependStrs.unshift($package.name),2===dependStrs.length&&dependStrs.unshift($idg.appid),$idg.getComponent(dependStrs.join("."))},extendedCtor.prototype.$componentType=key.slice(0,key.length-1),extendedCtor.decorated=!0,extendedCtor.idg=this,extendedCtor.package=pkg,extendedCtor.ctorName=componentName,extendedCtor}},{key:"extendComponet",value:function extendComponet(Ctor){return function(_Ctor3){Idg_inherits(IdgVueComponent,_Ctor3);var _super3=Idg_createSuper(IdgVueComponent);function IdgVueComponent(){return Idg_classCallCheck(this,IdgVueComponent),_super3.apply(this,arguments)}return IdgVueComponent}(Ctor)}},{key:"registerLocales",value:function registerLocales(pkg){var _this13=this;if(pkg.locales){var locales=pkg.locales;Object.keys(locales).forEach((function(locale){_this13.root.i18n.mergeLocaleMessage(locale,Idg_defineProperty({},_this13.appid,Idg_defineProperty({},pkg.name,locales[locale])))}))}}},{key:"registerStores",value:function registerStores(pkg){var storeOptions=function Idg_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Idg_ownKeys(Object(source),!0).forEach((function(key){Idg_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):Idg_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},pkg.store||{});storeOptions.state&&("function"==typeof storeOptions.state?storeOptions.state=storeOptions.state():storeOptions.state=lodash_js_default().cloneDeep(storeOptions.state));var storeId=this.generateId("store",pkg,this),storeIns=new store_Store(storeOptions,pkg,this);return this.stores[storeId]=storeIns,storeIns}},{key:"registerOptions",value:function registerOptions(pkg){if(pkg.options){var optionId=this.generateId("options",pkg,this);this.options[optionId]=pkg.options}}},{key:"registerRoutes",value:function registerRoutes(pkg){var _this14=this;pkg.routes&&this._registerRoutes(pkg.routes,pkg).forEach((function(route){_this14.routes.push(route)}))}},{key:"_registerRoutes",value:function _registerRoutes(routes,pkg){var _this15=this;return routes.map((function(route){return route.package=pkg,route.children&&(route.children=_this15._registerRoutes(route.children,pkg)),route}))}}]),Idg}(),idg_Idg=Idg;function Auth_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function Auth_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){Auth_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){Auth_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function Auth_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var Auth=function(){function Auth(app){!function Auth_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Auth),this.app=app}var _clear,_initByStorage,_setBindInfo,_setAccountId,_setName,_setToken;return function Auth_createClass(Constructor,protoProps,staticProps){return protoProps&&Auth_defineProperties(Constructor.prototype,protoProps),staticProps&&Auth_defineProperties(Constructor,staticProps),Constructor}(Auth,[{key:"getToken",value:function getToken(){return this.token}},{key:"getAccountId",value:function getAccountId(){return this.accountId}},{key:"getName",value:function getName(){return this.name}},{key:"getBindInfo",value:function getBindInfo(){return this.bindInfo}},{key:"setToken",value:(_setToken=Auth_asyncToGenerator(regeneratorRuntime.mark((function _callee(token){return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,this.app.storage.setItem("token",token);case 2:this.token=token;case 3:case"end":return _context.stop()}}),_callee,this)}))),function setToken(_x){return _setToken.apply(this,arguments)})},{key:"setName",value:(_setName=Auth_asyncToGenerator(regeneratorRuntime.mark((function _callee2(name){return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,this.app.storage.setItem("name",name);case 2:this.name=name;case 3:case"end":return _context2.stop()}}),_callee2,this)}))),function setName(_x2){return _setName.apply(this,arguments)})},{key:"setAccountId",value:(_setAccountId=Auth_asyncToGenerator(regeneratorRuntime.mark((function _callee3(accountId){return regeneratorRuntime.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,this.app.storage.setItem("accountId",accountId);case 2:this.accountId=accountId;case 3:case"end":return _context3.stop()}}),_callee3,this)}))),function setAccountId(_x3){return _setAccountId.apply(this,arguments)})},{key:"setBindInfo",value:(_setBindInfo=Auth_asyncToGenerator(regeneratorRuntime.mark((function _callee4(bindInfo){return regeneratorRuntime.wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,this.app.storage.setItem("bindInfo",bindInfo);case 2:this.bindInfo=bindInfo;case 3:case"end":return _context4.stop()}}),_callee4,this)}))),function setBindInfo(_x4){return _setBindInfo.apply(this,arguments)})},{key:"initByStorage",value:(_initByStorage=Auth_asyncToGenerator(regeneratorRuntime.mark((function _callee5(){return regeneratorRuntime.wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,this.app.storage.getItem("token");case 2:if(_context5.t0=_context5.sent,_context5.t0){_context5.next=5;break}_context5.t0=void 0;case 5:return this.token=_context5.t0,_context5.next=8,this.app.storage.getItem("name");case 8:if(_context5.t1=_context5.sent,_context5.t1){_context5.next=11;break}_context5.t1=void 0;case 11:return this.name=_context5.t1,_context5.next=14,this.app.storage.getItem("accountId");case 14:if(_context5.t2=_context5.sent,_context5.t2){_context5.next=17;break}_context5.t2=void 0;case 17:return this.accountId=_context5.t2,_context5.next=20,this.app.storage.getItem("bindInfo");case 20:if(_context5.t3=_context5.sent,_context5.t3){_context5.next=23;break}_context5.t3=void 0;case 23:this.bindInfo=_context5.t3;case 24:case"end":return _context5.stop()}}),_callee5,this)}))),function initByStorage(){return _initByStorage.apply(this,arguments)})},{key:"clear",value:(_clear=Auth_asyncToGenerator(regeneratorRuntime.mark((function _callee6(){return regeneratorRuntime.wrap((function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return _context6.next=2,this.app.storage.removeItem("token");case 2:return _context6.next=4,this.app.storage.removeItem("name");case 4:return _context6.next=6,this.app.storage.removeItem("accountId");case 6:return _context6.next=8,this.app.storage.removeItem("bindInfo");case 8:this.accountId=void 0,this.bindInfo=void 0,this.name=void 0,this.token=void 0;case 12:case"end":return _context6.stop()}}),_callee6,this)}))),function clear(){return _clear.apply(this,arguments)})}]),Auth}(),auth_Auth=Auth;function Dispatcher_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var Dispatcher=function(){function Dispatcher(){!function Dispatcher_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Dispatcher),this.cbs={}}return function Dispatcher_createClass(Constructor,protoProps,staticProps){return protoProps&&Dispatcher_defineProperties(Constructor.prototype,protoProps),staticProps&&Dispatcher_defineProperties(Constructor,staticProps),Constructor}(Dispatcher,[{key:"listen",value:function listen(key,callback){key&&callback&&(this.cbs[key]||(this.cbs[key]=[]),this.cbs[key].push(callback))}},{key:"remove",value:function remove(key,callback){if(this.cbs[key])if(callback){var index=this.cbs[key].findIndex((function(v){return v===callback}));index>=0&&this.cbs[key].splice(index,1)}else delete this.cbs[key]}},{key:"trigger",value:function trigger(key){var fns=this.cbs[key];if(fns&&0!==fns.length){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];for(var i=0;i<fns.length;i++)fns[i].apply(this,args)}}}]),Dispatcher}(),dispatcher_Dispatcher=Dispatcher,vue_router_esm_js_=__webpack_require__(82897),vue_router_esm_js_default=__webpack_require__.n(vue_router_esm_js_);function Env_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var envs=window.ci_envs||window.IDG_ENVS,error=function error(fun){return new Error("function Env.".concat(fun," is desperated, please update @idg/idg >= 2.12.16 and use this.$app.env.").concat(fun," instead"))},Env=function(){function Env(){!function Env_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Env)}return function Env_createClass(Constructor,protoProps,staticProps){return protoProps&&Env_defineProperties(Constructor.prototype,protoProps),staticProps&&Env_defineProperties(Constructor,staticProps),Constructor}(Env,[{key:"setEnv",value:function setEnv(env){return this.env=env,env}},{key:"getEnv",value:function getEnv(){if(this.env)return this.env;if(!envs)throw new Error("no envs declared, please declare in serviceConfig.js");var env;if(!(env=Array.isArray(envs)?envs.find((function(e){return e.frontend_host==="".concat(window.location.host)})):envs))throw new Error("no env finded in config, please declare in serviceConfig.js");return this.env=env,env}},{key:"getHost",value:function getHost(){return window.USE_MOCK?"":this.getEnv().host}},{key:"getFrontHost",value:function getFrontHost(){return this.getEnv().frontend_host||location.origin}},{key:"getAppkey",value:function getAppkey(){return this.getEnv().appkey}},{key:"getChannel",value:function getChannel(){return this.getEnv().channel}},{key:"getToken",value:function getToken(){return this.getEnv().token}}],[{key:"setEnv",value:function setEnv(env){throw error("setEnv")}},{key:"getEnv",value:function getEnv(){throw error("getEnv")}},{key:"getHost",value:function getHost(){throw error("getHost")}},{key:"getAppkey",value:function getAppkey(){throw error("getAppkey")}},{key:"getChannel",value:function getChannel(){throw error("getChannel")}},{key:"getToken",value:function getToken(){throw error("getToken")}}]),Env}();function RouterManager_typeof(obj){return RouterManager_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},RouterManager_typeof(obj)}function RouterManager_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function RouterManager_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function RouterManager_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?RouterManager_ownKeys(Object(source),!0).forEach((function(key){RouterManager_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):RouterManager_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function RouterManager_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function RouterManager_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}vue_runtime_esm_js_default().use(vue_router_esm_js_default());var originalPush=vue_router_esm_js_default().prototype.push;vue_router_esm_js_default().prototype.push=function push(location,onComplete,onAbort){return onComplete||onAbort?originalPush.call(this,location,onComplete,onAbort):originalPush.call(this,location).catch((function(err){return err}))};var instance,RouterManager=function(){function RouterManager(app){!function RouterManager_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,RouterManager),this.routeMaps={},this.routes=[],this.router=new(vue_router_esm_js_default()),this.app=app,this.initHooks()}return function RouterManager_createClass(Constructor,protoProps,staticProps){return protoProps&&RouterManager_defineProperties(Constructor.prototype,protoProps),staticProps&&RouterManager_defineProperties(Constructor,staticProps),Constructor}(RouterManager,[{key:"addRoutes",value:function addRoutes(idg,_routes){var routes=lodash_js_default().cloneDeep(_routes),addRouteConfig=idg.addRouteConfig,routeConfigs=[];addRouteConfig?(routeConfigs=addRouteConfig.root?[].concat(_toConsumableArray(this.addRoutesByParent(addRouteConfig.default,idg,routes.filter((function(r){return!r.root})))),_toConsumableArray(this.addRoutesByParent(addRouteConfig.root,idg,routes.filter((function(r){return r.root}))))):this.addRoutesByParent(addRouteConfig.default,idg,routes),logger_Log.debug("router/Router","add Routes",routeConfigs)):routeConfigs=this.getRouteConfigs(idg,routes),routeConfigs&&routeConfigs.length>0&&this.addRouteConfigs(routeConfigs)}},{key:"cloneRouteConfig",value:function cloneRouteConfig(routeConfig){return RouterManager_objectSpread(RouterManager_objectSpread({},routeConfig),{},{meta:RouterManager_objectSpread({},routeConfig.meta)})}},{key:"addRoutesByParent",value:function addRoutesByParent(parentRouteName,idg,routes){var parentRouteConfig,_this=this,current=this.routeMaps[parentRouteName].current;parentRouteName&&(parentRouteConfig=current.routeConfig);var routeConfigs=[];if(parentRouteName&&parentRouteConfig){for(var parentRouteMapItem=current.parent,cloned=this.cloneRouteConfig(parentRouteConfig),root=cloned;parentRouteMapItem;){var parent=this.cloneRouteConfig(parentRouteMapItem.routeConfig);parent.children=[],parent.children.push(root),root=parent,parentRouteMapItem=parentRouteMapItem.parent}cloned.name="".concat(idg.appid,"-").concat(cloned.name);var childRouteConfigs=[];routes.forEach((function(route){var routeConfig=_this.getRouteConfig(idg,route);routeConfig&&(routeConfig.path.startsWith("/")&&(routeConfig.path=routeConfig.path.slice(1)),childRouteConfigs.push(routeConfig))})),cloned.children=childRouteConfigs,routeConfigs=[root]}return routeConfigs}},{key:"registerHooks",value:function registerHooks(packageInstance){var pkg=packageInstance.package;if(pkg.routerBeforeResolve){var routerBeforeResolve=pkg.routerBeforeResolve;this.router.beforeResolve((function(to,from,next){routerBeforeResolve(packageInstance,to,from,next)}))}if(pkg.routerBeforeEach){var routerBeforeEach=pkg.routerBeforeEach;this.router.beforeEach((function(to,from,next){routerBeforeEach(packageInstance,to,from,next)}))}if(pkg.routerAfterEach){var routerAfterEach=pkg.routerAfterEach;this.router.afterEach((function(to,from){routerAfterEach(packageInstance,to,from)}))}}},{key:"getRouteConfigs",value:function getRouteConfigs(idg,routes,parent){var _this2=this,routeConfigs=[];return routes.forEach((function(route){var routeConfig=_this2.getRouteConfig(idg,route,parent);routeConfig&&routeConfigs.push(routeConfig)})),routeConfigs}},{key:"getRouteConfig",value:function getRouteConfig(idg,route,parent){if(route.name){var pkg=route.package;if(!pkg)throw new Error("package not found please init route first");var meta=route.meta||{};meta.$idg=idg,meta.$page=route.page;var pageId=idg.generateId(route.originPage||route.page||"",pkg,idg);meta.$stackPath=idg.getPath(pageId),meta.$name=route.name;var routeConfig={path:route.path,name:route.name,redirect:route.redirect,meta:meta},routeMapItem={sourceIdg:idg,routeConfig:routeConfig,route:route,parent:parent},routeMap=this.routeMaps[route.name];if(routeMap){if(routeMap.items.find((function(item){return item.sourceIdg===routeMapItem.sourceIdg&&routeMapItem.route.page===item.route.page})))return;this.routeMaps[route.name].items.push(routeMapItem)}else this.routeMaps[route.name]={items:[routeMapItem],current:routeMapItem};if(route.page){var page=this.getPage(route.name);page&&(routeConfig.component=page)}return route.children&&(routeConfig.children=this.getRouteConfigs(idg,route.children,routeMapItem)),routeConfig}logger_Log.warn("router/Router","route must has name property",route)}},{key:"setCurrentRoute",value:function setCurrentRoute(options){var name=options.name,idg=options.idg,page=options.page,notResetMatcher=options.notResetMatcher,routeMap=this.routeMaps[name];if(!routeMap)throw new Error("no route map found");routeMap.items.forEach((function(item){item.route.name===name&&(item.route.name=name+"_tmp"),item.routeConfig.name===name&&(item.routeConfig.name=name+"_tmp")}));var routeMapItem=routeMap.items.find((function(item){return void 0===page?item.sourceIdg===idg:item.sourceIdg===idg&&item.route.page===page}));if(!routeMapItem)throw new Error("no routeMapItem found");if(!(routeMapItem=routeMap.items.find((function(item){var _routeMapItem;return item.routeConfig.meta.$stackPath===(null===(_routeMapItem=routeMapItem)||void 0===_routeMapItem?void 0:_routeMapItem.routeConfig.meta.$stackPath)}))))throw new Error("no routeMapItem found by path");if(routeMapItem.route.name=name,routeMapItem.routeConfig.name=name,routeMap.current!==routeMapItem){routeMap.current=routeMapItem;for(var parentRouteMapItem=routeMapItem.parent;parentRouteMapItem;){var meta=parentRouteMapItem.routeConfig.meta;this.setCurrentRoute({name:meta.$name,idg:meta.$idg,page:meta.$page,notResetMatcher:!0}),parentRouteMapItem=parentRouteMapItem.parent}if(!notResetMatcher){var router=new(vue_router_esm_js_default())({routes:this.routes});this.router.matcher=router.matcher}}}},{key:"getPage",value:function getPage(name){var _this3=this;return function(){if(!name)throw new Error("no name found");var current=_this3.routeMaps[name].current;if(!current)throw new Error("no current found");var route=current.route,pkg=route.package;if(!pkg)throw new Error("package not found please init route first");var sourceIdg=current.sourceIdg,pageId=sourceIdg.generateId(route.page,pkg,sourceIdg),page=sourceIdg.getPage(pageId);return"function"==typeof page&&page.AsyncComponent?page():new Promise((function(resolve){resolve(page)}))}}},{key:"addRouteConfigs",value:function addRouteConfigs(routeConfigs){var _this4=this;logger_Log.debug("router/Router","addRouteConfigs",routeConfigs),routeConfigs.forEach((function(routeConfig){_this4.router.matcher.addRoute(routeConfig),_this4.routes.push(routeConfig)}))}},{key:"initHooks",value:function initHooks(){var _this5=this;this.router.beforeEach(function(){var _ref=function RouterManager_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){RouterManager_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){RouterManager_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(_to,_from,next){var title,locale,titleLocaleKey,name,item,envs;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(logger_Log.debug("router/Router","router beforeEach start",_to,_from),!_this5.router.app._isMounted&&_to.name&&_to.meta.$idg&&_to.meta.$page&&_this5.setCurrentRoute({name:_to.name,idg:_to.meta.$idg,page:_to.meta.$page}),(title=_to&&_to.meta&&_to.meta.title)&&("string"==typeof title?document.title=title:"object"===RouterManager_typeof(title)&&(locale=_this5.app.getLocale(),title[locale]&&(document.title=title[locale]))),titleLocaleKey=_to&&_to.meta&&_to.meta.titleLocaleKey,name=_to&&_to.name,titleLocaleKey&&name&&(item=_this5.routeMaps[name].current)&&(document.title=i18n.t("".concat(item.sourceIdg.appid,".").concat(titleLocaleKey))),!_this5.app.auth.getToken()){_context.next=11;break}return next(),_context.abrupt("return");case 11:return _context.prev=11,_context.next=14,_this5.app.auth.initByStorage();case 14:return _context.next=16,_this5.app.storage.getItem("@idg/idg/Env/envs");case 16:if(!(envs=_context.sent)){_context.next=28;break}if(!envs.token){_context.next=21;break}return _context.next=21,_this5.app.auth.setToken(envs.token);case 21:if(!envs.name){_context.next=24;break}return _context.next=24,_this5.app.auth.setName(envs.name);case 24:if(!envs.accountId){_context.next=27;break}return _context.next=27,_this5.app.auth.setAccountId(envs.accountId);case 27:envs.host&&envs.appkey&&envs.hasOwnProperty("channel")&&_this5.app.changeEnv({host:envs.host,appkey:envs.appkey,channel:envs.channel});case 28:_context.next=33;break;case 30:_context.prev=30,_context.t0=_context.catch(11),logger_Log.debug("router/Router","router beforeEach error",_context.t0);case 33:logger_Log.debug("router/Router","router beforeEach start"),next();case 35:case"end":return _context.stop()}}),_callee,null,[[11,30]])})));return function(_x,_x2,_x3){return _ref.apply(this,arguments)}}())}}],[{key:"getInstance",value:function getInstance(app){return instance||(instance=new RouterManager(app)),instance}}]),RouterManager}(),router_RouterManager=RouterManager,registered_inited=!1,sizes=[{size:"xs",value:480},{size:"sm",value:576},{size:"md",value:768},{size:"lg",value:992},{size:"xl",value:1200},{size:"xxl",value:1600}];function resize(pkg){logger_Log.debug("screen/registered","resize start",pkg);var root=document.documentElement,rootWidth=root.clientWidth,xsValue=sizes[0].value;root.style.fontSize=rootWidth<xsValue?rootWidth/375*16+"px":"16px";var finded=sizes.find((function(item,index){return index===sizes.length-1&&rootWidth>=item.value||rootWidth>=item.value&&rootWidth<sizes[index+1].value})),size=finded?finded.size:"xxs";logger_Log.debug("screen/registered","resize size",size),pkg.$store.commit("resize",size),logger_Log.debug("screen/registered","rootWidth:".concat(rootWidth,", rootStyle").concat(root.style.fontSize))}var global={name:"idg-global",registered:function registered(pkg){registered_inited||(resize(pkg),window.addEventListener("resize",(function(){resize(pkg)}),!1),window.addEventListener("orientationchange",(function(){resize(pkg)}),!1),registered_inited=!0)},store:{state:{screen:{size:void 0},global:{}},mutations:{resize:function resize(state,payload){logger_Log.debug("screen/store","resize",state,payload),state.screen.size=payload},setGlobal:function setGlobal(state,_ref){var key=_ref.key,val=_ref.val;logger_Log.debug("screen/store","setGlobal",state,{key:key,val:val}),vue_runtime_esm_js_default().set(state.global,key,val)}}}},fastclick_js_=__webpack_require__(83435),fastclick_js_default=__webpack_require__.n(fastclick_js_),devices_inited=!1;!devices_inited&&"addEventListener"in document&&(document.addEventListener("DOMContentLoaded",(function(){fastclick_js_default().attach(document.body)}),!1),devices_inited=!0);var logger=new Logger;logger.showDebug=location.href.indexOf("debug=1")>=0;var es_logger=logger;function Notify_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var Notify=function(){function Notify(){!function Notify_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Notify),this.permission=""}return function Notify_createClass(Constructor,protoProps,staticProps){return protoProps&&Notify_defineProperties(Constructor.prototype,protoProps),staticProps&&Notify_defineProperties(Constructor,staticProps),Constructor}(Notify,[{key:"send",value:function send(notifyMessage){this.grant((function(){new Notification(notifyMessage.title).onclick=function(e){es_logger.debug("notify/Notify","notification onclick",e),window.focus()}}))}},{key:"grant",value:function grant(send){var _this=this;if(this.permission)"granted"===this.permission&&send&&send();else{if("Notification"in window)return"granted"===Notification.permission?(this.permission="granted",void(send&&send())):void Notification.requestPermission((function(permission){_this.permission="default"===permission?"":permission,"granted"===permission&&send&&send()}));es_logger.debug("notify/Notify","Notification","This browser does not support desktop notification")}}}]),Notify}();function decode(origin){return origin?decodeURIComponent(escape(atob(origin))):""}function encode(origin){if(!origin)return"";try{return btoa(unescape(encodeURIComponent(origin)))}catch(error){throw console.log("encode error",origin),error}}function App_typeof(obj){return App_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},App_typeof(obj)}function App_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function App_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function App_setPrototypeOf(o,p){return App_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},App_setPrototypeOf(o,p)}function App_createSuper(Derived){var hasNativeReflectConstruct=function App_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=App_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=App_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return App_possibleConstructorReturn(this,result)}}function App_possibleConstructorReturn(self,call){return!call||"object"!==App_typeof(call)&&"function"!=typeof call?App_assertThisInitialized(self):call}function App_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function App_getPrototypeOf(o){return App_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},App_getPrototypeOf(o)}function App_toConsumableArray(arr){return function App_arrayWithoutHoles(arr){if(Array.isArray(arr))return App_arrayLikeToArray(arr)}(arr)||function App_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||App_unsupportedIterableToArray(arr)||function App_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function App_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return App_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?App_arrayLikeToArray(o,minLen):void 0}}function App_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}vue_runtime_esm_js_default().config.optionMergeStrategies.depends=function(){var toVal=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],fromVal=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],depends=[].concat(App_toConsumableArray(fromVal),App_toConsumableArray(toVal));return lodash_js_default().uniqBy(depends,(function(depend){if("string"==typeof depend){var strs=depend.split(".");return strs[strs.length-1]}return depend.variableName}))};var App=function(_Idg){!function App_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&App_setPrototypeOf(subClass,superClass)}(App,_Idg);var _super=App_createSuper(App);function App(appOptions,config){var _this;!function App_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,App);var appid=appOptions.appid,serviceAppid=appOptions.serviceAppid,packages=appOptions.packages,children=appOptions.children,ciEnv=appOptions.ciEnv,name=appOptions.name,version=appOptions.version,type=appOptions.type,lang=appOptions.lang,appSentryOptions=appOptions.sentry,env=new Env;ciEnv&&env.setEnv(ciEnv),es_locale.setLanguage(lang||"zh-CN");var envConfig=env.getEnv(),appkey=envConfig.appkey,channel=envConfig.channel,host=envConfig.host,token=envConfig.token,envSentryOptions=envConfig.sentry,sentry=appSentryOptions||envSentryOptions,channelOptions={appkey:appkey,channel:channel};return(_this=_super.call(this,{appid:appid,serviceAppid:serviceAppid,channelOptions:channelOptions,packages:[].concat(App_toConsumableArray(packages||[]),[global]),children:children},config)).env=env,_this.type=type||"app",_this.notify=new Notify,_this.root=App_assertThisInitialized(_this),_this.app=App_assertThisInitialized(_this),_this.appkey=appkey,_this.channel=channel,_this.auth=new auth_Auth(App_assertThisInitialized(_this)),_this.routerManager=router_RouterManager.getInstance(App_assertThisInitialized(_this)),_this.router=_this.routerManager.router,_this.dispatcher=new dispatcher_Dispatcher,_this.i18n=i18n,_this.store=new vuex_esm_js_.Store({}),_this.serverHost=host,token&&_this.auth.setToken(token),sentry&&es_logger.initSentry(sentry,_this.routerManager.router),name&&version&&(console.log("".concat(name,"@").concat(version," is start, use env:")),console.log(JSON.stringify({appkey:appkey,channel:channel,host:host})),console.log("if you want to change env, please redirect to ".concat(location.protocol,"//").concat(location.host,"#/idg/cienv"))),_this}return function App_createClass(Constructor,protoProps,staticProps){return protoProps&&App_defineProperties(Constructor.prototype,protoProps),staticProps&&App_defineProperties(Constructor,staticProps),Constructor}(App,[{key:"initListener",value:function initListener(){var _this2=this;this.root===this.app&&window!==window.parent&&window.addEventListener("message",function(){var _ref=function App_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){App_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){App_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(event){var envs,postEnvs,storageEnvs;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,_this2.app.storage.getItem("@idg/idg/Env/envs");case 2:envs=_context.sent,"change-envs"==event.data.type&&(postEnvs=event.data.content,storageEnvs=Object.assign({},envs,postEnvs),_this2.storage.setItem("@idg/idg/Env/envs",storageEnvs),console.log("",envs,storageEnvs));case 4:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}(),!1)}},{key:"screen",get:function get(){return this.root!==this?this.root.screen:this.findPackageInstance("idg-global").$store.state.screen}},{key:"setRouteLoading",value:function setRouteLoading(loading){this.setState("idg/route-loading",loading)}},{key:"getRouteLoading",value:function getRouteLoading(){return!!this.getState("idg/route-loading")}},{key:"setState",value:function setState(key,val){this.findPackageInstance("idg-global").$store.commit("setGlobal",{key:key,val:val})}},{key:"getState",value:function getState(key){return this.findPackageInstance("idg-global").$store.state.global[key]}},{key:"changeEnv",value:function changeEnv(env){var appkey=env.appkey,channel=env.channel,host=env.host;this.serverHost=host,this.appkey=appkey,this.channel=channel,this.channelOptions={appkey:appkey,channel:channel}}},{key:"startup",value:function startup(){this.initLang(),this.init(),this.register(),this.inject(),this.injectRoutes(),this.render(),this.initListener()}},{key:"initLang",value:function initLang(){var lang=function getStorageLanguage(appid){var langsStr=localStorage.getItem("@idg/idg/locale/language"),langs={};if(langsStr)try{langs=JSON.parse(langsStr)}catch(e){}return langs[appid]||null}(this.appid);lang&&es_locale.setLanguage(lang);var matched=location.search.match(/lang=([a-zA-Z-]+)/);matched&&matched[1]&&es_locale.setLanguage(matched[1])}},{key:"redirectLogin",value:function redirectLogin(){var search=window.location.search;search&&search.indexOf("?")>=0&&(search=search.slice(1));var refer=search.split("&").find((function(query){var strs=query.split("=");return strs&&strs[0]&&"refer"===strs[0]}));refer?(refer=refer.split("=")[1],window.location.href="".concat(decodeURIComponent(refer),"#/login")):this.routerManager.router.push("/login")}},{key:"responseHandler",value:function responseHandler(response){if(!response.data)return Promise.reject(new network_NetworkError(ERROR_RESPONSE_FORMAT,"no data"));var res=response.data;if(!res.hasOwnProperty("state")&&!res.hasOwnProperty("ret"))return Promise.reject(new network_NetworkError(ERROR_RESPONSE_FORMAT,"error response format, should like {state: xx, data: xx}"));if(1!==res.state)return Promise.reject(new network_NetworkError(res.state,res.msg));for(var _i=0,_Object$keys=Object.keys(res);_i<_Object$keys.length;_i++){var key=_Object$keys[_i];if(!["state","ret","code","message","msg","data"].includes(key))return res}return res.data}},{key:"getIdgHeaders",value:function getIdgHeaders(idg){var extraRequestStack=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],requestStack=lodash_js_default().uniqBy([].concat(idg.getRequestStack(),extraRequestStack),"appid");this.checkRequstStack(requestStack);var headers={RequestStack:JSON.stringify(requestStack)},token=this.getToken();return token&&(headers.Authorization=token),headers}},{key:"checkRequstStack",value:function checkRequstStack(requestStack){var _step,_iterator=function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=App_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(requestStack);try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value;if(!item.appid)throw new Error("invalid appid");if(!item.channelAlias){if(!item.appkey)throw new Error("invalid appkey");if(!item.channel&&0!==item.channel)throw new Error("invalid channel")}}}catch(err){_iterator.e(err)}finally{_iterator.f()}}},{key:"errorHandler",value:function errorHandler(error){if(error.response){if(403===error.response.status)return this.root.redirectLogin(),Promise.reject(new network_NetworkError(ERROR_RESPONSE_403,"403 NO ACCESS"));if(401===error.response.status)return this.root.redirectLogin(),Promise.reject(new network_NetworkError(ERROR_RESPONSE_401,"401 Unauthorized"));if(404===error.response.status)return Promise.reject(new network_NetworkError(ERROR_RESPONSE_404,"404 Not Found"));if(503===error.response.status)return Promise.reject(new network_NetworkError(ERROR_RESPONSE_404,"Service Unavaliable"))}return Promise.reject(new network_NetworkError(ERROR_NETWORK,"network error"))}},{key:"requestHandler",value:function requestHandler(api,requestConfig){var contentType=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ContentType.FORM_URLENCODED,idgHeaders=api.getIdgHeaders(),traceCustom=requestConfig.traceCustom||{},traceCustomStr=Object.keys(traceCustom).map((function(key){var val=traceCustom[key];return"".concat(key,":").concat(encode(val))})).join(","),customHeaders={"accept-language":this.getLocale()};return traceCustomStr&&(customHeaders["X-Trace-Custom"]=traceCustomStr),requestConfig.headers=Object.assign(requestConfig.headers,idgHeaders,customHeaders),requestConfig.params||(requestConfig.params={}),requestConfig.headers["Content-Type"]=requestConfig.headers["Content-Type"]||contentType,requestConfig.data=network_Api.generateData(requestConfig.data,requestConfig.headers["Content-Type"]),requestConfig}},{key:"setLocale",value:function setLocale(locale){es_locale.setLanguage(locale)}},{key:"setStorageLanguageAndReload",value:function setStorageLanguageAndReload(lang){locale_setStorageLanguageAndReload(this.appid,lang)}},{key:"getLocale",value:function getLocale(){return es_locale.getLanguage()}},{key:"getServerHost",value:function getServerHost(){return this.serverHost}},{key:"setServerHost",value:function setServerHost(host){this.serverHost=host}},{key:"getBaseURL",value:function getBaseURL(idg,httpOptions){return window.USE_MOCK?"":"service"===this.type?this.getServerHost():idg.serviceAppid===this.serviceAppid?httpOptions&&httpOptions.requestStack&&httpOptions.requestStack.length>0?this.getProxyURL():this.getServerHost():this.getProxyURL()}},{key:"getProxyURL",value:function getProxyURL(){return this.getServerHost()+"/main.php/json/proxy/call?url="}},{key:"getToken",value:function getToken(){return this.auth.getToken()}},{key:"render",value:function render(){this.router;var i18n=this.i18n,store=this.store;return new(vue_runtime_esm_js_default())({store:store,i18n:i18n,router:this.routerManager.router,render:function render(h){return h("router-view")}}).$mount("#app")}},{key:"generateChannel",value:function generateChannel(){return"".concat(this.appid,".").concat(this.appkey,".").concat(this.channel)}},{key:"openOriginPage",value:function openOriginPage(config){var isRoot=this.root===this,location=(isRoot?this.routerManager.router:new(vue_router_esm_js_default())({routes:this.routes})).resolve(config,this.root.router.currentRoute);if(isRoot)window.open(location.href);else{var search=window.location.search,appendSearch="lang=".concat(this.root.getLocale());search+=search?"&"+appendSearch:"?"+appendSearch,window.open("".concat(this.env.getFrontHost()).concat(search).concat(location.href))}}}]),App}(idg_Idg),idg_App=App;function Service_typeof(obj){return Service_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Service_typeof(obj)}function Service_setPrototypeOf(o,p){return Service_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},Service_setPrototypeOf(o,p)}function Service_createSuper(Derived){var hasNativeReflectConstruct=function Service_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=Service_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Service_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Service_possibleConstructorReturn(this,result)}}function Service_possibleConstructorReturn(self,call){return!call||"object"!==Service_typeof(call)&&"function"!=typeof call?function Service_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function Service_getPrototypeOf(o){return Service_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},Service_getPrototypeOf(o)}var Service=function(_Idg){!function Service_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&Service_setPrototypeOf(subClass,superClass)}(Service,_Idg);var _super=Service_createSuper(Service);function Service(serviceOptions,config){return function Service_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Service),_super.call(this,serviceOptions,config)}return Service}(idg_Idg),idg_Service=Service;function Resource_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function Resource_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var Resource=function(){function Resource(){!function Resource_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Resource)}var _loadRemoteEntry;return function Resource_createClass(Constructor,protoProps,staticProps){return protoProps&&Resource_defineProperties(Constructor.prototype,protoProps),staticProps&&Resource_defineProperties(Constructor,staticProps),Constructor}(Resource,null,[{key:"registerRemoteEntry",value:function registerRemoteEntry(pakcageName,remoteEntry){Resource.remoteEntries[pakcageName]||(Resource.remoteEntries[pakcageName]=remoteEntry)}},{key:"import",value:function _import(resources){var promises=[];return resources.forEach((function(resource){promises.push(new Promise((function(resolve,reject){if(Resource.loadedResources[resource.url])resolve(Resource.loadedResources[resource.url]);else{var el=Resource.createElement(resource);el.onload=function(res){resolve(res),el.onload=null},el.onerror=function(){reject("load error")},document.head.appendChild(el)}})))})),Promise.all(promises)}},{key:"loadRemoteEntry",value:(_loadRemoteEntry=function Resource_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){Resource_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){Resource_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(remoteEntry,scope){var module,url,splits,index,packageName,w,container,factory,Module,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(module=_args.length>2&&void 0!==_args[2]?_args[2]:".",!Resource.scopeModules[scope]){_context.next=3;break}return _context.abrupt("return",Resource.scopeModules[scope]);case 3:if(url="string"==typeof remoteEntry?remoteEntry:remoteEntry(),splits=url.split("/"),(index=splits.findIndex((function(s){return"@idg"===s})))>=0&&splits[index+1]&&(packageName="@idg/".concat(splits[index+1])),packageName&&Resource.remoteEntries[packageName]&&(url=Resource.remoteEntries[packageName]),url.includes("//")){_context.next=10;break}throw new Error("invalid url");case 10:return _context.next=12,this.import([{url:url,type:"script"}]);case 12:return w=window,_context.next=15,__webpack_require__.I("default");case 15:return container=w[scope],_context.next=18,container.init(__webpack_require__.S.default);case 18:return _context.next=20,w[scope].get(module);case 20:return factory=_context.sent,Module=factory(),Resource.scopeModules[scope]=Module,_context.abrupt("return",Module);case 24:case"end":return _context.stop()}}),_callee,this)}))),function loadRemoteEntry(_x,_x2){return _loadRemoteEntry.apply(this,arguments)})},{key:"createElement",value:function createElement(resource){var el;return"script"===resource.type?((el=document.createElement("script")).src=resource.url,el.type="text/javascript",el.async=!0):((el=document.createElement("link")).type="text/css",el.rel="stylesheet",el.href=resource.url),el}}]),Resource}();function AsyncService_typeof(obj){return AsyncService_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},AsyncService_typeof(obj)}function AsyncService_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function AsyncService_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function AsyncService_setPrototypeOf(o,p){return AsyncService_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},AsyncService_setPrototypeOf(o,p)}function AsyncService_createSuper(Derived){var hasNativeReflectConstruct=function AsyncService_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=AsyncService_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=AsyncService_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return AsyncService_possibleConstructorReturn(this,result)}}function AsyncService_possibleConstructorReturn(self,call){return!call||"object"!==AsyncService_typeof(call)&&"function"!=typeof call?function AsyncService_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function AsyncService_getPrototypeOf(o){return AsyncService_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},AsyncService_getPrototypeOf(o)}Resource.loadedResources={},Resource.remoteEntries={},Resource.scopeModules={};var AsyncService=function(_Service){!function AsyncService_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&AsyncService_setPrototypeOf(subClass,superClass)}(AsyncService,_Service);var _load,_super=AsyncService_createSuper(AsyncService);function AsyncService(serviceOptions,config){var _this;return function AsyncService_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AsyncService),(_this=_super.call(this,serviceOptions,config)).async=!0,_this.remoteEntry=serviceOptions.remoteEntry,_this.getRemoteService=serviceOptions.getRemoteService,_this}return function AsyncService_createClass(Constructor,protoProps,staticProps){return protoProps&&AsyncService_defineProperties(Constructor.prototype,protoProps),staticProps&&AsyncService_defineProperties(Constructor,staticProps),Constructor}(AsyncService,[{key:"load",value:(_load=function AsyncService_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){AsyncService_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){AsyncService_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(){var scope,remoteEntry,RemoteService,service;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!this.service){_context.next=2;break}return _context.abrupt("return",this.service);case 2:return scope="app_".concat(this.appid),_context.next=5,Resource.loadRemoteEntry(this.remoteEntry,scope,".");case 5:return remoteEntry=_context.sent,logger_Log.debug("idg/AsyncService","load",remoteEntry),RemoteService=this.getRemoteService?this.getRemoteService(remoteEntry):remoteEntry.IdgService||remoteEntry.default,service=new RemoteService(this.channelOptions,this.config),this.service=service,this.parent&&(this.parent.removeChild(this),this.parent.dynamicAddChild(service)),_context.abrupt("return",service);case 12:case"end":return _context.stop()}}),_callee,this)}))),function load(){return _load.apply(this,arguments)})}]),AsyncService}(idg_Service),idg_AsyncService=AsyncService;var Controller=function Controller(){!function Controller_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Controller)};Controller.depends=[];var controller_Controller=Controller;function Menus_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var Menus=function(){function Menus(){!function Menus_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Menus),this.menusO={}}return function Menus_createClass(Constructor,protoProps,staticProps){return protoProps&&Menus_defineProperties(Constructor.prototype,protoProps),staticProps&&Menus_defineProperties(Constructor,staticProps),Constructor}(Menus,[{key:"registerMenu",value:function registerMenu(menu){this.menusO[menu.name]||(this.menusO[menu.name]=lodash_js_default().cloneDeep(menu))}},{key:"registerMenus",value:function registerMenus(menus){var _this=this;menus.forEach((function(menu){_this.registerMenu(menu)}))}},{key:"getMenus",value:function getMenus(){var menus=[],menusO=lodash_js_default().cloneDeep(this.menusO);return Object.keys(this.menusO).forEach((function(menuName){var menu=menusO[menuName];if(menu.parentName){var parent=menusO[menu.parentName];parent.children||(parent.children=[]),parent.children.push(menu)}else menus.push(menu)})),lodash_js_default().sortBy(menus,["order"])}}]),Menus}(),es_menus=new Menus}}]);